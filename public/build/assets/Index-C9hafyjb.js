import{j as e,S as P,x as R,A as S}from"./app-D2BBDCFC.js";import{A as T}from"./AdminAuthenticatedLayout-BpRIVWHk.js";import{u as A,C as D,R as F,S as $,F as M,P as O}from"./useTableManagement-CimlMvBQ.js";import{S as q}from"./StatusButton-CNGm9NUM.js";import{T as E,a as K}from"./TableExporter-D3yV3r2t.js";import"./useSweetAlert-D27GvFwx.js";import{u as w}from"./useTranslation-CVJluGRe.js";import{r as B}from"./renderCellContent-DnZ9KIBd.js";import{O as c,T as m}from"./OverlayTrigger-D8mD9LjI.js";import"./Header-BKPdAUPJ.js";import"./Sidebar-CyvRIWTq.js";import"./bootstrap.bundle.min-Ba_qfNiZ.js";import"./NavLink-DsoYfajC.js";import"./Dropdown-DDVnA8hG.js";import"./transition-DtKZpb_s.js";import"./TextInput-WxNO9k3W.js";import"./es-CMu9_e4K.js";import"./floating-ui.dom-CQJTMakY.js";import"./SelectInput-xW4hb1gP.js";import"./FileSaver.min-Cyq3_crI.js";import"./typeof-QjJsDpFa.js";function ce({auth:j,session:I,title:u,subtitle:b,modules:o,levels:f,queryParams:d=null,availableLocales:L}){const i=typeof d=="object"&&d!==null?d:{},s=w(),_=Object.entries(f||{}).map(([t,l])=>({value:t,label:l})),r=[{key:"label",label:s("modulo"),sort:!0,filter:"text",type:"link",link:"modules.edit",class_th:"",class_td:"",placeholder:s("modulo_filtrar")},{key:"level",label:s("nivel"),sort:!0,filter:"select",options:_,class_th:"",class_td:"",placeholder:s("nivel_filtrar")},{key:"icon",label:s("icono"),sort:!1,filter:"",type:"html",class_th:"text-center",class_td:"text-center",dateKeys:["date_from","date_to"],export:"html"},{key:"color",label:s("color"),sort:!1,filter:"",type:"html",class_th:"text-center",class_td:"text-center",export:"html"}],{permissions:a,sortParams:p,perPage:x,setPerPage:y,visibleColumns:n,toggleColumnVisibility:g,SearchFieldChanged:v,sortChanged:N,filteredData:k,handleDelete:C}=A({table:"tblModules",allColumnKeys:r.map(t=>t.key),entityName:"modules",indexRoute:"modules.index",destroyRoute:"modules.destroy",filteredDataRoute:"modules.filtered-data",labelName:"modulo",queryParams:i}),h=[];return a!=null&&a["modules.create"]&&h.push({text:s("modulo_nuevo"),icon:"la-plus",url:"modules.create",modal:!1}),e.jsxs(T,{user:j.user,title:u,subtitle:b,actions:h,children:[e.jsx(P,{title:u}),e.jsxs("div",{className:"contents",children:[e.jsx("div",{className:"row",children:e.jsxs("div",{className:"controls d-flex align-items-center",children:[e.jsx(D,{columns:r,visibleColumns:n,toggleColumn:g}),e.jsx(F,{perPage:x,setPerPage:y}),e.jsx(E,{filename:s("modulos"),columns:r,fetchData:k})]})}),e.jsx("div",{className:"table-responsive",children:e.jsxs(K,{className:"table table-nowrap table-striped align-middle mb-0",id:"tblModules",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[r.map(t=>e.jsxs("th",{className:`${t.class_th??""} ${n.includes(t.key)?"":"d-none"}`.trim(),children:[s(t.label),t.sort&&e.jsx($,{name:t.key,sortable:!0,sort_field:i.sort_field,sort_direction:i.sort_direction,sortChanged:N})]},t.key)),e.jsx("th",{className:"text-center",children:s("acciones")})]})}),e.jsx(M,{columns:r,queryParams:i,visibleColumns:n,SearchFieldChanged:v}),e.jsx("tbody",{children:o.data.map(t=>e.jsxs("tr",{children:[r.map(l=>e.jsx("td",{className:`${l.class_td??""} ${n.includes(l.key)?"":"d-none"}`.trim(),children:B(t[l.key],l,t)},l.key)),e.jsxs("td",{className:"text-end",children:[(a==null?void 0:a["modules.edit"])&&e.jsx(c,{placement:"top",overlay:e.jsx(m,{className:"ttp-top",children:t.status==1?s("modulo_activo"):s("modulo_inactivo")}),children:e.jsx(q,{status:t.status,id:t.id,updateRoute:"modules.status",reloadUrl:route("modules.index"),reloadResource:"modules"})},"status-"+t.id),(a==null?void 0:a["modules.edit"])&&e.jsx(c,{placement:"top",overlay:e.jsx(m,{className:"ttp-top",children:s("editar")}),children:e.jsx(R,{href:route("modules.edit",t.id),className:"btn btn-sm btn-info ms-1",children:e.jsx("i",{className:"la la-edit"})})},"edit-"+t.id),(a==null?void 0:a["modules.destroy"])&&e.jsx(c,{placement:"top",overlay:e.jsx(m,{className:"ttp-top",children:s("eliminar")}),children:e.jsx("span",{children:e.jsx("button",{type:"button",className:"btn btn-sm btn-danger ms-1",onClick:()=>C(t.id),children:e.jsx("i",{className:"la la-trash"})})})},"delete-"+t.id)]})]},"module-"+t.id))})]})}),e.jsx(O,{links:o.meta.links,totalRecords:o.meta.total,currentPage:o.meta.current_page,perPage:o.meta.per_page,onPageChange:t=>{S.get(route("modules.index"),{...i,page:t,per_page:x,sort_field:p.sort_field,sort_direction:p.sort_direction},{preserveState:!0})}})]})]})}export{ce as default};
