import{X as I,G as w,j as e,S as A,A as g}from"./app-Vy3k0dXk.js";import{A as D}from"./AdminAuthenticatedLayout-RXgeCdrB.js";import"./Header-CzP3bCHI.js";import"./react-tooltip.min-C0giFYtK.js";import{F as L}from"./FileInput-CWK1_png.js";import{I as z}from"./InfoPopover-DZRJR7k7.js";import{I as d}from"./InputError-DMNw4oH7.js";import{P}from"./PrimaryButton-DRjProiT.js";import{T as p}from"./TextInput-B6FzyUMY.js";import{u as T}from"./useSweetAlert-McVN4vy-.js";import{u as W}from"./useTranslation-bNzddkut.js";import"./Sidebar-CCn1nLaa.js";import"./bootstrap.bundle.min-B2fMu5hW.js";import"./NavLink-1EYN7PL6.js";import"./Dropdown-C05IHB0O.js";import"./transition-CGU5FYrv.js";import"./OverlayTrigger-DvJH8nk_.js";import"./floating-ui.dom-CQJTMakY.js";function ae({auth:j,session:B,title:x,subtitle:b,availableLocales:O,company:r}){var f;const s=W(),c=((f=I())==null?void 0:f.props)||{};c.locale,c.languages;const{showConfirm:N}=T();c.permissions;const{data:i,setData:o,errors:m,processing:h}=w({name:r.name||"",tradename:r.tradename||"",nif:r.nif||"",logo:null}),_=t=>{const{name:a,type:n,checked:l,value:E,files:u}=t.target;n==="checkbox"?o(a,l):n==="file"?o(a,u.length?u[0]:null):o(a,E)};function v(t){t.preventDefault();const a=new FormData;a.append("_method","PUT"),Object.entries(i).forEach(([n,l])=>{n==="logo"&&l instanceof File?a.append(n,l):typeof l=="object"&&l!==null?a.append(n,JSON.stringify(l)):l!=null&&a.append(n,l)}),g.post(route("companies.update",r.id),a,{forceFormData:!0,preserveScroll:!0,onSuccess:()=>console.log("Empresa actualizada"),onError:n=>console.error("Errores:",n),onFinish:()=>console.log("PeticiÃ³n finalizada")})}const F=()=>{N({title:s("logo_eliminar"),text:s("logo_eliminar_confirm"),icon:"warning",onConfirm:()=>{g.delete(route("companies.logo.delete",r.id),{preserveScroll:!0,onSuccess:()=>{location.reload()}})}})},S=t=>{if(typeof t!="string")return"";const a=t.trim();return a?a.startsWith("http")||a.startsWith("//")||a.startsWith("/")?a:a.includes("storage/")?"/"+a.replace(/^\/+/,""):a.includes("companies/")?"/storage/"+a.replace(/^\/+/,""):`/storage/companies/${a.replace(/^\/+/,"")}`:""},C=[{text:s("empresas_volver"),icon:"la-angle-left",url:"companies.index",modal:!1},{text:s("empresa_nueva"),icon:"la-plus",url:"companies.create",modal:!1}];return e.jsxs(D,{user:j.user,title:x,subtitle:b,actions:C,children:[e.jsx(A,{title:x}),e.jsxs("div",{className:"contents pb-4",children:[e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-12",children:e.jsxs("h2",{children:[s("empresa")," ",e.jsx("u",{children:r.name}),r.is_ute?e.jsx("span",{className:"ms-2",children:"(UTE)"}):""]})}),e.jsxs("div",{className:"col-12 mt-2 mb-4",children:[e.jsxs("span",{className:"text-muted me-5",children:[s("creado"),": ",e.jsx("strong",{children:r.formatted_created_at})]}),r.created_by_name&&e.jsxs("span",{className:"text-muted me-5",children:[s("creado_por"),": ",e.jsx("strong",{children:r.created_by_name})]}),e.jsxs("span",{className:"text-muted me-5",children:[s("actualizado"),": ",e.jsx("strong",{children:r.formatted_updated_at})]}),r.updated_by_name&&e.jsxs("span",{className:"text-muted me-5",children:[s("actualizado_por"),": ",e.jsx("strong",{children:r.updated_by_name})]})]})]}),e.jsx("form",{onSubmit:v,children:e.jsxs("div",{className:"row gy-3",children:[e.jsx("div",{className:"col-lg-6",children:e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"name",className:"form-label",children:[s("razon_social"),"*"]}),e.jsx(p,{className:"",type:"text",placeholder:s("empresa_nombre"),value:i.name,onChange:t=>o("name",t.target.value),maxLength:100}),e.jsx(d,{message:m.name})]})}),e.jsx("div",{className:"col-lg-6",children:e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"tradename",className:"form-label",children:[s("nombre_comercial"),"*"]}),e.jsx(p,{className:"",type:"text",placeholder:s("nombre_comercial"),value:i.tradename,onChange:t=>o("tradename",t.target.value),maxLength:100}),e.jsx(d,{message:m.tradename})]})}),e.jsx("div",{className:"col-lg-3",children:e.jsxs("div",{className:"position-relative",children:[e.jsxs("label",{htmlFor:"nif",className:"form-label",children:[s("nif"),"*"]}),e.jsx(p,{className:"",type:"text",placeholder:s("nif"),value:i.nif,onChange:t=>o("nif",t.target.value),maxLength:15}),e.jsx(z,{code:"company-nif"}),e.jsx(d,{message:m.nif})]})}),e.jsx("div",{className:"offset-lg-1 col-lg-8",children:e.jsxs("div",{children:[e.jsx("label",{htmlFor:"logo",className:"form-label",children:s("logo")}),r.logo?e.jsxs("div",{className:"d-flex align-items-start",children:[e.jsx("img",{src:S(r.logo),alt:r.name,className:"img-thumbnail me-3",style:{maxWidth:"300px",objectFit:"contain"}}),e.jsx("button",{type:"button",className:"ms-2 btn btn-sm btn-danger",onClick:F,children:e.jsx("i",{className:"la la-trash"})})]}):e.jsx(L,{name:"logo",accept:"image/*",onChange:_,error:m.logo}),e.jsxs("p",{className:"pt-1 text-warning small",children:[e.jsx("span",{className:"me-5",children:s("imagen_formato")}),e.jsxs("span",{className:"me-5",children:[s("imagen_peso_max"),": 1MB"]}),s("imagen_medidas_recomendadas"),": 400x400px"]})]})}),e.jsx("div",{className:"mt-4 text-end",children:e.jsx(P,{disabled:h,className:"btn btn-rdn",children:h?s("procesando")+"...":s("guardar")})})]})})]})]})}export{ae as default};
