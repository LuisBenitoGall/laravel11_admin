import{X as T,G as E,r as v,j as e}from"./app-D2BBDCFC.js";import{F as M}from"./DatePickerToForm-1TaZaf05.js";import{I as i}from"./InputError-BrT6sb3o.js";import{R as k}from"./ModalTemplate-DNWm_Dg3.js";import{S as q}from"./SelectInput-xW4hb1gP.js";import{T as d}from"./TextInput-WxNO9k3W.js";import{u as D}from"./useTranslation-CVJluGRe.js";function U({show:h,onClose:o,onCreate:p,companyId:u,side:f,salutations:b}){var j;const l=D(),g=(((j=T())==null?void 0:j.props)||{}).roles||{};Object.entries(g).map(([s,a])=>({value:s,label:a}));const{data:n,setData:r,post:N,processing:y,reset:_,errors:t,clearErrors:C}=E({role:"",name:"",surname:"",email:"",status:!0,link_company:!0,send_pwd:!1,birthday:null,position:"",salutation:null,phones:[""],company_id:u||null,side:f||""});v.useEffect(()=>{r("company_id",u||null),C()},[h,u]);const S=()=>{r("phones",[...n.phones||[],""])},P=(s,a)=>{const m=[...n.phones||[]];m[s]=a,r("phones",m)},R=s=>{const a=[...n.phones||[]];a.splice(s,1),r("phones",a.length?a:[""])},c=v.useRef(null),x=()=>{c.current&&typeof c.current.reportValidity=="function"&&!c.current.reportValidity()||N(route("users.store"),{preserveScroll:!0,onSuccess:s=>{_(),o==null||o(),typeof p=="function"&&p(s)}})};return e.jsx(k,{show:h,onClose:o,onConfirm:x,title:l("usuario_nuevo"),confirmText:l(y?"guardando":"guardar"),cancelText:l("cancelar"),children:e.jsxs("form",{ref:c,onSubmit:s=>{s.preventDefault(),x()},children:[e.jsx("div",{className:"mb-3",children:e.jsxs("div",{className:"position-relative",children:[e.jsxs("label",{className:"form-label",children:[l("nombre"),"*"]}),e.jsx(d,{value:n.name,onChange:s=>r("name",s.target.value),required:!0}),e.jsx(i,{message:t.name})]})}),e.jsx("div",{className:"mb-3",children:e.jsxs("div",{className:"position-relative",children:[e.jsxs("label",{className:"form-label",children:[l("apellidos"),"*"]}),e.jsx(d,{value:n.surname,onChange:s=>r("surname",s.target.value),required:!0}),e.jsx(i,{message:t.surname})]})}),e.jsx("div",{className:"mb-3",children:e.jsxs("div",{className:"position-relative",children:[e.jsxs("label",{className:"form-label",children:[l("email"),"*"]}),e.jsx(d,{type:"email",value:n.email,onChange:s=>r("email",s.target.value),required:!0}),e.jsx(i,{message:t.email})]})}),e.jsx("div",{className:"mb-3",children:e.jsxs("div",{className:"position-relative",children:[e.jsx("label",{className:"form-label",children:l("cargo")}),e.jsx(d,{value:n.position,onChange:s=>r("position",s.target.value)}),e.jsx(i,{message:t.position})]})}),e.jsx("div",{className:"mb-3",children:e.jsx("div",{className:"position-relative",children:e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-lg-6",children:[e.jsx(M,{name:"birthday",selected:n.birthday?new Date(n.birthday):null,onChange:(s,a)=>r(s,a?a.toISOString().split("T")[0]:null),dateFormat:"dd/MM/yyyy",label:"fecha_nacimiento",required:!1}),e.jsx(i,{message:t.birthday})]}),e.jsxs("div",{className:"col-lg-6",children:[e.jsx("label",{htmlFor:"salutation",className:"form-label",children:l("tratamiento")}),e.jsxs(q,{className:"form-select",name:"salutation",value:n.salutation,onChange:s=>r("salutation",s.target.value),children:[e.jsx("option",{value:"",children:l("opcion_selec")}),b.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))]}),e.jsx(i,{message:t.salutation})]})]})})}),e.jsx("div",{className:"mb-3",children:e.jsxs("div",{className:"position-relative",children:[e.jsx("label",{className:"form-label",children:l("telefonos")}),e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-9",children:[(n.phones||[]).map((s,a)=>e.jsxs("div",{className:"input-group mb-3",children:[e.jsx("input",{type:"text",className:"form-control",value:s,onChange:m=>P(a,m.target.value),maxLength:14}),e.jsx("button",{type:"button",className:"btn btn-outline-danger",onClick:()=>R(a),children:e.jsx("i",{className:"la la-trash"})})]},`phone-${a}`)),e.jsx(i,{message:t.phones})]}),e.jsx("div",{className:"col-md-3",children:e.jsxs("button",{type:"button",className:"btn btn-sm btn-secondary mt-2",onClick:S,children:[e.jsx("i",{className:"la la-plus"})," ",l("telefono")||"Añadir teléfono"]})})]})]})})]})})}export{U as M};
