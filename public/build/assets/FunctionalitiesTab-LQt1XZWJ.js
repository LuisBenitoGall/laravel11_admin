import{r as g,j as a,x as R,A as q}from"./app-DRj95fl3.js";import{u as S,C as $,R as w,S as E,F as A,P as M}from"./useTableManagement-4XK40PxX.js";import{T as O}from"./TableExporter-Cf6Xvvy9.js";import"./useSweetAlert-D-bXTlQV.js";import{u as K}from"./useTranslation-BmHTxgDU.js";import{T as L}from"./Table-CUvKlSmp.js";import{O as y,T as _}from"./OverlayTrigger-BXbmHDr2.js";import"./es-D0X2UUFm.js";import"./floating-ui.dom-CQJTMakY.js";import"./SelectInput-CcScNE44.js";import"./TextInput-DHZ4LhQ-.js";import"./FileSaver.min-Bs0fFUdx.js";import"./typeof-QjJsDpFa.js";function at({module_data:k,functionalities:l,refreshKey:N,queryParams:c={},availableLocales:V,onDeleted:h}){var j,p,f;const d=typeof c=="object"&&c!==null?c:{},s=K(),r=[{key:"label",label:s("etiqueta"),sort:!0,filter:"text",class_th:"",class_td:"",placeholder:s("etiqueta_filtrar")},{key:"name",label:s("funcionalidad"),sort:!0,filter:"text",class_th:"",class_td:"",placeholder:s("funcionalidad_filtrar")}],{permissions:i,sortParams:b,perPage:x,setPerPage:P,visibleColumns:o,toggleColumnVisibility:C,SearchFieldChanged:v,sortChanged:T,filteredData:m,handleDelete:D}=S({table:"tblFunctionalities",allColumnKeys:r.map(t=>t.key),entityName:"functionalities",indexRoute:null,routeParams:[],destroyRoute:"functionalities.destroy",filteredDataRoute:"functionalities.filtered-data",labelName:"funcionalidad",queryParams:{...d,module_id:k.id},manualFiltering:!0,onManualFilter:async t=>{const e=await m(t);u({data:(e==null?void 0:e.functionalities)??[],meta:(e==null?void 0:e.meta)??{},links:(e==null?void 0:e.links)??[]})}}),[n,u]=g.useState(()=>({data:(l==null?void 0:l.data)??[],meta:(l==null?void 0:l.meta)??{},links:(l==null?void 0:l.links)??[]})),F=async()=>{const t=await m();u({data:(t==null?void 0:t.functionalities)??[],meta:(t==null?void 0:t.meta)??{},links:(t==null?void 0:t.links)??[]}),typeof h=="function"&&h()};return g.useEffect(()=>{(async()=>{const e=await m();u({data:(e==null?void 0:e.functionalities)??[],meta:(e==null?void 0:e.meta)??{},links:(e==null?void 0:e.links)??[]})})()},[N]),a.jsxs("div",{children:[a.jsx("div",{className:"row",children:a.jsxs("div",{className:"controls d-flex align-items-center",children:[a.jsx($,{columns:r,visibleColumns:o,toggleColumn:C}),a.jsx(w,{perPage:x,setPerPage:P}),a.jsx(O,{filename:s("funcionalidades"),columns:r,fetchData:m})]})}),a.jsx("div",{className:"table-responsive",children:a.jsxs(L,{className:"table table-nowrap table-striped align-middle mb-0",id:"tblCountries",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[r.map(t=>a.jsxs("th",{className:`${t.class_th??""} ${o.includes(t.key)?"":"d-none"}`.trim(),children:[s(t.label),t.sort&&a.jsx(E,{name:t.key,sortable:!0,sort_field:d.sort_field,sort_direction:d.sort_direction,sortChanged:T})]},t.key)),a.jsx("th",{className:"text-center",children:s("acciones")})]})}),a.jsx(A,{columns:r,queryParams:d,visibleColumns:o,SearchFieldChanged:v}),a.jsx("tbody",{children:n.data.map(t=>a.jsxs("tr",{children:[r.map(e=>a.jsx("td",{className:`${e.class_td??""} ${o.includes(e.key)?"":"d-none"}`.trim(),children:t[e.key]},e.key)),a.jsxs("td",{className:"text-end",children:[(i==null?void 0:i["modules.edit"])&&a.jsx(y,{placement:"top",overlay:a.jsx(_,{className:"ttp-top",children:s("editar")}),children:a.jsx(R,{href:route("functionalities.edit",t.id),className:"btn btn-sm btn-info ms-1",children:a.jsx("i",{className:"la la-edit"})})},"edit-"+t.id),(i==null?void 0:i["modules.edit"])&&a.jsx(y,{placement:"top",overlay:a.jsx(_,{className:"ttp-top",children:s("eliminar")}),children:a.jsx("span",{children:a.jsx("button",{type:"button",className:"btn btn-sm btn-danger ms-1",onClick:()=>D(t.id,F),children:a.jsx("i",{className:"la la-trash"})})})},"delete-"+t.id)]})]},`func-${t.id}`))})]})}),a.jsx(M,{links:n.links||[],totalRecords:((j=n.meta)==null?void 0:j.total)||0,currentPage:((p=n.meta)==null?void 0:p.current_page)||1,perPage:((f=n.meta)==null?void 0:f.per_page)||x,onPageChange:t=>{q.get(route("permissions.index"),{...d,page:t,per_page:x,sort_field:b.sort_field,sort_direction:b.sort_direction},{preserveState:!0})}})]})}export{at as default};
