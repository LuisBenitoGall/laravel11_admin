import{r as o,j as a,f as Lt,A as Z,X as At,G as Dt}from"./app-D2BBDCFC.js";import{F as Wt}from"./DatePickerToForm-1TaZaf05.js";import{F as Ht}from"./FileInput-3y_uw9aG.js";import{I as Y}from"./InputError-BrT6sb3o.js";import{u as Je}from"./useSweetAlert-D27GvFwx.js";import{u as Qe}from"./useTranslation-CVJluGRe.js";import{y as x,b as z,u as y,c as Ze,d as Pe,e as _e,o as et,s as pe,f as tt,g as Ut,h as qt,i as me,r as qe,l as Ve,j as ze,k as Vt,m as zt,n as $e,p as Kt,q as Gt,t as Xt,v as Ke,F as at,w as Yt,x as Jt,O as J,T as Q}from"./OverlayTrigger-D8mD9LjI.js";import{P as Qt}from"./PrimaryButton-ML6K15LR.js";import{R as Zt}from"./RadioButton-BUTmDsxP.js";import{S as Pt}from"./SelectInput-xW4hb1gP.js";import{T as je}from"./TextInput-WxNO9k3W.js";import"./es-CMu9_e4K.js";import"./floating-ui.dom-CQJTMakY.js";/* empty css                         */const Me=e=>o.forwardRef((t,n)=>a.jsx("div",{...t,ref:n,className:x(t.className,e)}));function ea(e){const t=o.useRef(null);return o.useEffect(()=>{t.current=e}),t.current}const ta=["as","disabled"];function aa(e,t){if(e==null)return{};var n={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function sa(e){return!e||e.trim()==="#"}function st({tagName:e,disabled:t,href:n,target:s,rel:r,role:i,onClick:d,tabIndex:p=0,type:h}){e||(n!=null||s!=null||r!=null?e="a":e="button");const f={tagName:e};if(e==="button")return[{type:h||"button",disabled:t},f];const m=u=>{if((t||e==="a"&&sa(n))&&u.preventDefault(),t){u.stopPropagation();return}d==null||d(u)},g=u=>{u.key===" "&&(u.preventDefault(),m(u))};return e==="a"&&(n||(n="#"),t&&(n=void 0)),[{role:i??"button",disabled:void 0,tabIndex:t?void 0:p,href:n,target:e==="a"?s:void 0,"aria-disabled":t||void 0,rel:e==="a"?r:void 0,onClick:m,onKeyDown:g},f]}const na=o.forwardRef((e,t)=>{let{as:n,disabled:s}=e,r=aa(e,ta);const[i,{tagName:d}]=st(Object.assign({tagName:n,disabled:s},r));return a.jsx(d,Object.assign({},r,i,{ref:t}))});na.displayName="Button";const ra={"aria-label":z.string,onClick:z.func,variant:z.oneOf(["white"])},Oe=o.forwardRef(({className:e,variant:t,"aria-label":n="Close",...s},r)=>a.jsx("button",{ref:r,type:"button",className:x("btn-close",t&&`btn-close-${t}`,e),"aria-label":n,...s}));Oe.displayName="CloseButton";Oe.propTypes=ra;const ve=o.forwardRef(({as:e,bsPrefix:t,variant:n="primary",size:s,active:r=!1,disabled:i=!1,className:d,...p},h)=>{const f=y(t,"btn"),[m,{tagName:g}]=st({tagName:e,disabled:i,...p}),u=g;return a.jsx(u,{...m,...p,ref:h,disabled:i,className:x(d,f,r&&"active",n&&`${f}-${n}`,s&&`${f}-${s}`,p.href&&i&&"disabled")})});ve.displayName="Button";const Be=o.forwardRef(({className:e,bsPrefix:t,as:n="div",...s},r)=>(t=y(t,"card-body"),a.jsx(n,{ref:r,className:x(e,t),...s})));Be.displayName="CardBody";const nt=o.forwardRef(({className:e,bsPrefix:t,as:n="div",...s},r)=>(t=y(t,"card-footer"),a.jsx(n,{ref:r,className:x(e,t),...s})));nt.displayName="CardFooter";const rt=o.createContext(null);rt.displayName="CardHeaderContext";const ot=o.forwardRef(({bsPrefix:e,className:t,as:n="div",...s},r)=>{const i=y(e,"card-header"),d=o.useMemo(()=>({cardHeaderBsPrefix:i}),[i]);return a.jsx(rt.Provider,{value:d,children:a.jsx(n,{ref:r,...s,className:x(t,i)})})});ot.displayName="CardHeader";const lt=o.forwardRef(({bsPrefix:e,className:t,variant:n,as:s="img",...r},i)=>{const d=y(e,"card-img");return a.jsx(s,{ref:i,className:x(n?`${d}-${n}`:d,t),...r})});lt.displayName="CardImg";const it=o.forwardRef(({className:e,bsPrefix:t,as:n="div",...s},r)=>(t=y(t,"card-img-overlay"),a.jsx(n,{ref:r,className:x(e,t),...s})));it.displayName="CardImgOverlay";const ct=o.forwardRef(({className:e,bsPrefix:t,as:n="a",...s},r)=>(t=y(t,"card-link"),a.jsx(n,{ref:r,className:x(e,t),...s})));ct.displayName="CardLink";const oa=Me("h6"),dt=o.forwardRef(({className:e,bsPrefix:t,as:n=oa,...s},r)=>(t=y(t,"card-subtitle"),a.jsx(n,{ref:r,className:x(e,t),...s})));dt.displayName="CardSubtitle";const ut=o.forwardRef(({className:e,bsPrefix:t,as:n="p",...s},r)=>(t=y(t,"card-text"),a.jsx(n,{ref:r,className:x(e,t),...s})));ut.displayName="CardText";const la=Me("h5"),mt=o.forwardRef(({className:e,bsPrefix:t,as:n=la,...s},r)=>(t=y(t,"card-title"),a.jsx(n,{ref:r,className:x(e,t),...s})));mt.displayName="CardTitle";const ft=o.forwardRef(({bsPrefix:e,className:t,bg:n,text:s,border:r,body:i=!1,children:d,as:p="div",...h},f)=>{const m=y(e,"card");return a.jsx(p,{ref:f,...h,className:x(t,m,n&&`bg-${n}`,s&&`text-${s}`,r&&`border-${r}`),children:i?a.jsx(Be,{children:d}):d})});ft.displayName="Card";const Ee=Object.assign(ft,{Img:lt,Title:mt,Subtitle:dt,Body:Be,Link:ct,Text:ut,Header:ot,Footer:nt,ImgOverlay:it});function ia(e,t){return o.Children.toArray(e).some(n=>o.isValidElement(n)&&n.type===t)}function ca({as:e,bsPrefix:t,className:n,...s}){t=y(t,"col");const r=Ze(),i=Pe(),d=[],p=[];return r.forEach(h=>{const f=s[h];delete s[h];let m,g,u;typeof f=="object"&&f!=null?{span:m,offset:g,order:u}=f:m=f;const c=h!==i?`-${h}`:"";m&&d.push(m===!0?`${t}${c}`:`${t}${c}-${m}`),u!=null&&p.push(`order${c}-${u}`),g!=null&&p.push(`offset${c}-${g}`)}),[{...s,className:x(n,...d,...p)},{as:e,bsPrefix:t,spans:d}]}const q=o.forwardRef((e,t)=>{const[{className:n,...s},{as:r="div",bsPrefix:i,spans:d}]=ca(e);return a.jsx(r,{...s,ref:t,className:x(n,!d.length&&i)})});q.displayName="Col";var da=Function.prototype.bind.call(Function.prototype.call,[].slice);function ne(e,t){return da(e.querySelectorAll(t))}const ua="data-rr-ui-";function ma(e){return`${ua}${e}`}const fa={type:z.string,tooltip:z.bool,as:z.elementType},Ce=o.forwardRef(({as:e="div",className:t,type:n="valid",tooltip:s=!1,...r},i)=>a.jsx(e,{...r,ref:i,className:x(t,`${n}-${s?"tooltip":"feedback"}`)}));Ce.displayName="Feedback";Ce.propTypes=fa;const K=o.createContext({}),Ie=o.forwardRef(({id:e,bsPrefix:t,className:n,type:s="checkbox",isValid:r=!1,isInvalid:i=!1,as:d="input",...p},h)=>{const{controlId:f}=o.useContext(K);return t=y(t,"form-check-input"),a.jsx(d,{...p,ref:h,type:s,id:e||f,className:x(n,t,r&&"is-valid",i&&"is-invalid")})});Ie.displayName="FormCheckInput";const be=o.forwardRef(({bsPrefix:e,className:t,htmlFor:n,...s},r)=>{const{controlId:i}=o.useContext(K);return e=y(e,"form-check-label"),a.jsx("label",{...s,ref:r,htmlFor:n||i,className:x(t,e)})});be.displayName="FormCheckLabel";const pt=o.forwardRef(({id:e,bsPrefix:t,bsSwitchPrefix:n,inline:s=!1,reverse:r=!1,disabled:i=!1,isValid:d=!1,isInvalid:p=!1,feedbackTooltip:h=!1,feedback:f,feedbackType:m,className:g,style:u,title:c="",type:w="checkbox",label:k,children:M,as:$="input",...A},O)=>{t=y(t,"form-check"),n=y(n,"form-switch");const{controlId:B}=o.useContext(K),D=o.useMemo(()=>({controlId:e||B}),[B,e]),I=!M&&k!=null&&k!==!1||ia(M,be),j=a.jsx(Ie,{...A,type:w==="switch"?"checkbox":w,ref:O,isValid:d,isInvalid:p,disabled:i,as:$});return a.jsx(K.Provider,{value:D,children:a.jsx("div",{style:u,className:x(g,I&&t,s&&`${t}-inline`,r&&`${t}-reverse`,w==="switch"&&n),children:M||a.jsxs(a.Fragment,{children:[j,I&&a.jsx(be,{title:c,children:k}),f&&a.jsx(Ce,{type:m,tooltip:h,children:f})]})})})});pt.displayName="FormCheck";const Ne=Object.assign(pt,{Input:Ie,Label:be}),ht=o.forwardRef(({bsPrefix:e,type:t,size:n,htmlSize:s,id:r,className:i,isValid:d=!1,isInvalid:p=!1,plaintext:h,readOnly:f,as:m="input",...g},u)=>{const{controlId:c}=o.useContext(K);return e=y(e,"form-control"),a.jsx(m,{...g,type:t,size:s,ref:u,readOnly:f,id:r||c,className:x(i,h?`${e}-plaintext`:e,n&&`${e}-${n}`,t==="color"&&`${e}-color`,d&&"is-valid",p&&"is-invalid")})});ht.displayName="FormControl";const pa=Object.assign(ht,{Feedback:Ce}),xt=o.forwardRef(({className:e,bsPrefix:t,as:n="div",...s},r)=>(t=y(t,"form-floating"),a.jsx(n,{ref:r,className:x(e,t),...s})));xt.displayName="FormFloating";const Le=o.forwardRef(({controlId:e,as:t="div",...n},s)=>{const r=o.useMemo(()=>({controlId:e}),[e]);return a.jsx(K.Provider,{value:r,children:a.jsx(t,{...n,ref:s})})});Le.displayName="FormGroup";const gt=o.forwardRef(({as:e="label",bsPrefix:t,column:n=!1,visuallyHidden:s=!1,className:r,htmlFor:i,...d},p)=>{const{controlId:h}=o.useContext(K);t=y(t,"form-label");let f="col-form-label";typeof n=="string"&&(f=`${f} ${f}-${n}`);const m=x(r,t,s&&"visually-hidden",n&&f);return i=i||h,n?a.jsx(q,{ref:p,as:"label",className:m,htmlFor:i,...d}):a.jsx(e,{ref:p,className:m,htmlFor:i,...d})});gt.displayName="FormLabel";const jt=o.forwardRef(({bsPrefix:e,className:t,id:n,...s},r)=>{const{controlId:i}=o.useContext(K);return e=y(e,"form-range"),a.jsx("input",{...s,type:"range",ref:r,className:x(t,e),id:n||i})});jt.displayName="FormRange";const yt=o.forwardRef(({bsPrefix:e,size:t,htmlSize:n,className:s,isValid:r=!1,isInvalid:i=!1,id:d,...p},h)=>{const{controlId:f}=o.useContext(K);return e=y(e,"form-select"),a.jsx("select",{...p,size:n,ref:h,className:x(s,e,t&&`${e}-${t}`,r&&"is-valid",i&&"is-invalid"),id:d||f})});yt.displayName="FormSelect";const vt=o.forwardRef(({bsPrefix:e,className:t,as:n="small",muted:s,...r},i)=>(e=y(e,"form-text"),a.jsx(n,{...r,ref:i,className:x(t,e,s&&"text-muted")})));vt.displayName="FormText";const bt=o.forwardRef((e,t)=>a.jsx(Ne,{...e,ref:t,type:"switch"}));bt.displayName="Switch";const ha=Object.assign(bt,{Input:Ne.Input,Label:Ne.Label}),Nt=o.forwardRef(({bsPrefix:e,className:t,children:n,controlId:s,label:r,...i},d)=>(e=y(e,"form-floating"),a.jsxs(Le,{ref:d,className:x(t,e),controlId:s,...i,children:[n,a.jsx("label",{htmlFor:s,children:r})]})));Nt.displayName="FloatingLabel";const xa={_ref:z.any,validated:z.bool,as:z.elementType},Ae=o.forwardRef(({className:e,validated:t,as:n="form",...s},r)=>a.jsx(n,{...s,ref:r,className:x(e,t&&"was-validated")}));Ae.displayName="Form";Ae.propTypes=xa;const _=Object.assign(Ae,{Group:Le,Control:pa,Floating:xt,Check:Ne,Switch:ha,Label:gt,Text:vt,Range:jt,Select:yt,FloatingLabel:Nt});var ye;function Ge(e){if((!ye&&ye!==0||e)&&_e){var t=document.createElement("div");t.style.position="absolute",t.style.top="-9999px",t.style.width="50px",t.style.height="50px",t.style.overflow="scroll",document.body.appendChild(t),ye=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return ye}function ga(){return o.useState(null)}function Fe(e){e===void 0&&(e=et());try{var t=e.activeElement;return!t||!t.nodeName?null:t}catch{return e.body}}function ja(e){const t=o.useRef(e);return t.current=e,t}function ya(e){const t=ja(e);o.useEffect(()=>()=>t.current(),[])}function va(e=document){const t=e.defaultView;return Math.abs(t.innerWidth-e.documentElement.clientWidth)}const Xe=ma("modal-open");class De{constructor({ownerDocument:t,handleContainerOverflow:n=!0,isRTL:s=!1}={}){this.handleContainerOverflow=n,this.isRTL=s,this.modals=[],this.ownerDocument=t}getScrollbarWidth(){return va(this.ownerDocument)}getElement(){return(this.ownerDocument||document).body}setModalAttributes(t){}removeModalAttributes(t){}setContainerStyle(t){const n={overflow:"hidden"},s=this.isRTL?"paddingLeft":"paddingRight",r=this.getElement();t.style={overflow:r.style.overflow,[s]:r.style[s]},t.scrollBarWidth&&(n[s]=`${parseInt(pe(r,s)||"0",10)+t.scrollBarWidth}px`),r.setAttribute(Xe,""),pe(r,n)}reset(){[...this.modals].forEach(t=>this.remove(t))}removeContainerStyle(t){const n=this.getElement();n.removeAttribute(Xe),Object.assign(n.style,t.style)}add(t){let n=this.modals.indexOf(t);return n!==-1||(n=this.modals.length,this.modals.push(t),this.setModalAttributes(t),n!==0)||(this.state={scrollBarWidth:this.getScrollbarWidth(),style:{}},this.handleContainerOverflow&&this.setContainerStyle(this.state)),n}remove(t){const n=this.modals.indexOf(t);n!==-1&&(this.modals.splice(n,1),!this.modals.length&&this.handleContainerOverflow&&this.removeContainerStyle(this.state),this.removeModalAttributes(t))}isTopModal(t){return!!this.modals.length&&this.modals[this.modals.length-1]===t}}const ba=["show","role","className","style","children","backdrop","keyboard","onBackdropClick","onEscapeKeyDown","transition","runTransition","backdropTransition","runBackdropTransition","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","renderDialog","renderBackdrop","manager","container","onShow","onHide","onExit","onExited","onExiting","onEnter","onEntering","onEntered"];function Na(e,t){if(e==null)return{};var n={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}let Te;function Ca(e){return Te||(Te=new De({ownerDocument:e==null?void 0:e.document})),Te}function wa(e){const t=tt(),n=e||Ca(t),s=o.useRef({dialog:null,backdrop:null});return Object.assign(s.current,{add:()=>n.add(s.current),remove:()=>n.remove(s.current),isTopModal:()=>n.isTopModal(s.current),setDialogRef:o.useCallback(r=>{s.current.dialog=r},[]),setBackdropRef:o.useCallback(r=>{s.current.backdrop=r},[])})}const Ct=o.forwardRef((e,t)=>{let{show:n=!1,role:s="dialog",className:r,style:i,children:d,backdrop:p=!0,keyboard:h=!0,onBackdropClick:f,onEscapeKeyDown:m,transition:g,runTransition:u,backdropTransition:c,runBackdropTransition:w,autoFocus:k=!0,enforceFocus:M=!0,restoreFocus:$=!0,restoreFocusOptions:A,renderDialog:O,renderBackdrop:B=N=>a.jsx("div",Object.assign({},N)),manager:D,container:I,onShow:j,onHide:b=()=>{},onExit:T,onExited:F,onExiting:G,onEnter:W,onEntering:L,onEntered:P}=e,le=Na(e,ba);const H=tt(),X=Ut(I),R=wa(D),l=qt(),C=ea(n),[E,V]=o.useState(!n),S=o.useRef(null);o.useImperativeHandle(t,()=>R,[R]),_e&&!C&&n&&(S.current=Fe(H==null?void 0:H.document)),n&&E&&V(!1);const U=me(()=>{if(R.add(),ee.current=Ve(document,"keydown",Re),ce.current=Ve(document,"focus",()=>setTimeout(we),!0),j&&j(),k){var N,ge;const ue=Fe((N=(ge=R.dialog)==null?void 0:ge.ownerDocument)!=null?N:H==null?void 0:H.document);R.dialog&&ue&&!ze(R.dialog,ue)&&(S.current=ue,R.dialog.focus())}}),ie=me(()=>{if(R.remove(),ee.current==null||ee.current(),ce.current==null||ce.current(),$){var N;(N=S.current)==null||N.focus==null||N.focus(A),S.current=null}});o.useEffect(()=>{!n||!X||U()},[n,X,U]),o.useEffect(()=>{E&&ie()},[E,ie]),ya(()=>{ie()});const we=me(()=>{if(!M||!l()||!R.isTopModal())return;const N=Fe(H==null?void 0:H.document);R.dialog&&N&&!ze(R.dialog,N)&&R.dialog.focus()}),he=me(N=>{N.target===N.currentTarget&&(f==null||f(N),p===!0&&b())}),Re=me(N=>{h&&Vt(N)&&R.isTopModal()&&(m==null||m(N),N.defaultPrevented||b())}),ce=o.useRef(),ee=o.useRef(),xe=(...N)=>{V(!0),F==null||F(...N)};if(!X)return null;const te=Object.assign({role:s,ref:R.setDialogRef,"aria-modal":s==="dialog"?!0:void 0},le,{style:i,className:r,tabIndex:-1});let de=O?O(te):a.jsx("div",Object.assign({},te,{children:o.cloneElement(d,{role:"document"})}));de=qe(g,u,{unmountOnExit:!0,mountOnEnter:!0,appear:!0,in:!!n,onExit:T,onExiting:G,onExited:xe,onEnter:W,onEntering:L,onEntered:P,children:de});let ae=null;return p&&(ae=B({ref:R.setBackdropRef,onClick:he}),ae=qe(c,w,{in:!!n,appear:!0,mountOnEnter:!0,unmountOnExit:!0,children:ae})),a.jsx(a.Fragment,{children:Lt.createPortal(a.jsxs(a.Fragment,{children:[ae,de]}),X)})});Ct.displayName="Modal";const Ra=Object.assign(Ct,{Manager:De});function Ea(e,t){e.classList?e.classList.add(t):zt(e,t)||(typeof e.className=="string"?e.className=e.className+" "+t:e.setAttribute("class",(e.className&&e.className.baseVal||"")+" "+t))}function Ye(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function Fa(e,t){e.classList?e.classList.remove(t):typeof e.className=="string"?e.className=Ye(e.className,t):e.setAttribute("class",Ye(e.className&&e.className.baseVal||"",t))}const re={FIXED_CONTENT:".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",STICKY_CONTENT:".sticky-top",NAVBAR_TOGGLER:".navbar-toggler"};class Ta extends De{adjustAndStore(t,n,s){const r=n.style[t];n.dataset[t]=r,pe(n,{[t]:`${parseFloat(pe(n,t))+s}px`})}restore(t,n){const s=n.dataset[t];s!==void 0&&(delete n.dataset[t],pe(n,{[t]:s}))}setContainerStyle(t){super.setContainerStyle(t);const n=this.getElement();if(Ea(n,"modal-open"),!t.scrollBarWidth)return;const s=this.isRTL?"paddingLeft":"paddingRight",r=this.isRTL?"marginLeft":"marginRight";ne(n,re.FIXED_CONTENT).forEach(i=>this.adjustAndStore(s,i,t.scrollBarWidth)),ne(n,re.STICKY_CONTENT).forEach(i=>this.adjustAndStore(r,i,-t.scrollBarWidth)),ne(n,re.NAVBAR_TOGGLER).forEach(i=>this.adjustAndStore(r,i,t.scrollBarWidth))}removeContainerStyle(t){super.removeContainerStyle(t);const n=this.getElement();Fa(n,"modal-open");const s=this.isRTL?"paddingLeft":"paddingRight",r=this.isRTL?"marginLeft":"marginRight";ne(n,re.FIXED_CONTENT).forEach(i=>this.restore(s,i)),ne(n,re.STICKY_CONTENT).forEach(i=>this.restore(r,i)),ne(n,re.NAVBAR_TOGGLER).forEach(i=>this.restore(r,i))}}let ke;function ka(e){return ke||(ke=new Ta(e)),ke}const wt=o.forwardRef(({className:e,bsPrefix:t,as:n="div",...s},r)=>(t=y(t,"modal-body"),a.jsx(n,{ref:r,className:x(e,t),...s})));wt.displayName="ModalBody";const Rt=o.createContext({onHide(){}}),We=o.forwardRef(({bsPrefix:e,className:t,contentClassName:n,centered:s,size:r,fullscreen:i,children:d,scrollable:p,...h},f)=>{e=y(e,"modal");const m=`${e}-dialog`,g=typeof i=="string"?`${e}-fullscreen-${i}`:`${e}-fullscreen`;return a.jsx("div",{...h,ref:f,className:x(m,t,r&&`${e}-${r}`,s&&`${m}-centered`,p&&`${m}-scrollable`,i&&g),children:a.jsx("div",{className:x(`${e}-content`,n),children:d})})});We.displayName="ModalDialog";const Et=o.forwardRef(({className:e,bsPrefix:t,as:n="div",...s},r)=>(t=y(t,"modal-footer"),a.jsx(n,{ref:r,className:x(e,t),...s})));Et.displayName="ModalFooter";const $a=o.forwardRef(({closeLabel:e="Close",closeVariant:t,closeButton:n=!1,onHide:s,children:r,...i},d)=>{const p=o.useContext(Rt),h=$e(()=>{p==null||p.onHide(),s==null||s()});return a.jsxs("div",{ref:d,...i,children:[r,n&&a.jsx(Oe,{"aria-label":e,variant:t,onClick:h})]})}),Ft=o.forwardRef(({bsPrefix:e,className:t,closeLabel:n="Close",closeButton:s=!1,...r},i)=>(e=y(e,"modal-header"),a.jsx($a,{ref:i,...r,className:x(t,e),closeLabel:n,closeButton:s})));Ft.displayName="ModalHeader";const Sa=Me("h4"),Tt=o.forwardRef(({className:e,bsPrefix:t,as:n=Sa,...s},r)=>(t=y(t,"modal-title"),a.jsx(n,{ref:r,className:x(e,t),...s})));Tt.displayName="ModalTitle";function _a(e){return a.jsx(at,{...e,timeout:null})}function Ma(e){return a.jsx(at,{...e,timeout:null})}const kt=o.forwardRef(({bsPrefix:e,className:t,style:n,dialogClassName:s,contentClassName:r,children:i,dialogAs:d=We,"data-bs-theme":p,"aria-labelledby":h,"aria-describedby":f,"aria-label":m,show:g=!1,animation:u=!0,backdrop:c=!0,keyboard:w=!0,onEscapeKeyDown:k,onShow:M,onHide:$,container:A,autoFocus:O=!0,enforceFocus:B=!0,restoreFocus:D=!0,restoreFocusOptions:I,onEntered:j,onExit:b,onExiting:T,onEnter:F,onEntering:G,onExited:W,backdropClassName:L,manager:P,...le},H)=>{const[X,R]=o.useState({}),[l,C]=o.useState(!1),E=o.useRef(!1),V=o.useRef(!1),S=o.useRef(null),[U,ie]=ga(),we=Kt(H,ie),he=$e($),Re=Gt();e=y(e,"modal");const ce=o.useMemo(()=>({onHide:he}),[he]);function ee(){return P||ka({isRTL:Re})}function xe(v){if(!_e)return;const se=ee().getScrollbarWidth()>0,Ue=v.scrollHeight>et(v).documentElement.clientHeight;R({paddingRight:se&&!Ue?Ge():void 0,paddingLeft:!se&&Ue?Ge():void 0})}const te=$e(()=>{U&&xe(U.dialog)});Xt(()=>{Ke(window,"resize",te),S.current==null||S.current()});const de=()=>{E.current=!0},ae=v=>{E.current&&U&&v.target===U.dialog&&(V.current=!0),E.current=!1},N=()=>{C(!0),S.current=Jt(U.dialog,()=>{C(!1)})},ge=v=>{v.target===v.currentTarget&&N()},ue=v=>{if(c==="static"){ge(v);return}if(V.current||v.target!==v.currentTarget){V.current=!1;return}$==null||$()},$t=v=>{w?k==null||k(v):(v.preventDefault(),c==="static"&&N())},St=(v,se)=>{v&&xe(v),F==null||F(v,se)},_t=v=>{S.current==null||S.current(),b==null||b(v)},Mt=(v,se)=>{G==null||G(v,se),Yt(window,"resize",te)},Ot=v=>{v&&(v.style.display=""),W==null||W(v),Ke(window,"resize",te)},Bt=o.useCallback(v=>a.jsx("div",{...v,className:x(`${e}-backdrop`,L,!u&&"show")}),[u,L,e]),He={...n,...X};He.display="block";const It=v=>a.jsx("div",{role:"dialog",...v,style:He,className:x(t,e,l&&`${e}-static`,!u&&"show"),onClick:c?ue:void 0,onMouseUp:ae,"data-bs-theme":p,"aria-label":m,"aria-labelledby":h,"aria-describedby":f,children:a.jsx(d,{...le,onMouseDown:de,className:s,contentClassName:r,children:i})});return a.jsx(Rt.Provider,{value:ce,children:a.jsx(Ra,{show:g,ref:we,backdrop:c,container:A,keyboard:!0,autoFocus:O,enforceFocus:B,restoreFocus:D,restoreFocusOptions:I,onEscapeKeyDown:$t,onShow:M,onHide:$,onEnter:St,onEntering:Mt,onEntered:j,onExit:_t,onExiting:T,onExited:Ot,manager:ee(),transition:u?_a:void 0,backdropTransition:u?Ma:void 0,renderBackdrop:Bt,renderDialog:It})})});kt.displayName="Modal";const fe=Object.assign(kt,{Body:wt,Header:Ft,Title:Tt,Footer:Et,Dialog:We,TRANSITION_DURATION:300,BACKDROP_TRANSITION_DURATION:150}),Se=o.forwardRef(({bsPrefix:e,className:t,as:n="div",...s},r)=>{const i=y(e,"row"),d=Ze(),p=Pe(),h=`${i}-cols`,f=[];return d.forEach(m=>{const g=s[m];delete s[m];let u;g!=null&&typeof g=="object"?{cols:u}=g:u=g;const c=m!==p?`-${m}`:"";u!=null&&f.push(`${h}${c}-${u}`)}),a.jsx(n,{ref:r,...s,className:x(t,i,...f)})});Se.displayName="Row";const oe=o.forwardRef(({bsPrefix:e,variant:t,animation:n="border",size:s,as:r="div",className:i,...d},p)=>{e=y(e,"spinner");const h=`${e}-${n}`;return a.jsx(r,{ref:p,...d,className:x(i,h,s&&`${h}-${s}`,t&&`text-${t}`)})});oe.displayName="Spinner";const Oa=e=>{if(!e||typeof e!="string")return"—";const n=e.replace(/\s+/g,"").match(/^\+(\d{1,3})(\d+)$/);if(!n)return e;const s=`+${n[1]}`,i=n[2].replace(/(\d{3})(?=\d)/g,"$1 ").trim();return`${s} ${i}`.trim()},Ba=(e,t)=>e?t?`tel:${e};ext=${encodeURIComponent(t)}`:`tel:${e}`:"#",Ia=(e,t="")=>{if(!e)return"#";const n=e.replace(/^\+/,""),s=t?`?text=${encodeURIComponent(t)}`:"";return`https://wa.me/${n}${s}`},La=e=>[...e||[]].sort((t,n)=>t.is_primary&&!n.is_primary?-1:!t.is_primary&&n.is_primary?1:(t.id??0)-(n.id??0));function Aa({phoneableType:e,phoneableId:t,defaultWaMessage:n="Hola"}){const s=Qe(),{showConfirm:r}=Je(),[i,d]=o.useState(!0),[p,h]=o.useState([]),[f,m]=o.useState(null),[g,u]=o.useState(!1),[c,w]=o.useState(null),[k,M]=o.useState(!1),[$,A]=o.useState(null),[O,B]=o.useState(null),[D,I]=o.useState(null),j=s(n)||n,b=async()=>{if(!(!e||!t)){d(!0),m(null);try{const l=route("phones.get",{id:t,model:e}),C=await fetch(l,{headers:{"X-Requested-With":"XMLHttpRequest"}});if(!C.ok)throw new Error(`HTTP ${C.status}`);const E=await C.json();h(Array.isArray(E)?E:[])}catch(l){m(l.message||"Error")}finally{d(!1)}}};o.useEffect(()=>{b()},[e,t]);const T=o.useMemo(()=>La(p),[p]),F=()=>{w({id:null,number:"",type:"",label:"",ext:"",is_whatsapp:!1,is_primary:!1,notes:""}),u(!0)},G=l=>{w({id:l.id,number:l.e164,type:l.type||"mobile",label:l.label||"",ext:l.ext||"",is_whatsapp:!!l.is_whatsapp,is_primary:!!l.is_primary,notes:l.notes||""}),u(!0)},W=()=>{k||(u(!1),w(null))},L=(l,C)=>{w(E=>({...E,[l]:C}))},P=l=>{var V;if((V=l==null?void 0:l.preventDefault)==null||V.call(l),!c)return;M(!0),m(null);const C={phoneable_type:e,phoneable_id:t,number:c.number,type:c.type,label:c.label||null,ext:c.ext||null,is_whatsapp:c.is_whatsapp?1:0,is_primary:c.is_primary?1:0,notes:c.notes||null},E={preserveScroll:!0,onSuccess:()=>{b(),W()},onError:S=>{const U=S&&Object.values(S)[0];m(U||s("error_generic"))},onFinish:()=>M(!1)};c.id?Z.put(route("phones.update",c.id),C,E):Z.post(route("phones.store"),C,E)},le=async l=>{l&&r({title:s("telefono_eliminar"),text:s("telefono_eliminar_confirm"),icon:"warning",onConfirm:async()=>{A(l),Z.delete(route("phones.destroy",l),{preserveScroll:!0,onSuccess:()=>b(),onError:()=>m(s("error_generic")),onFinish:()=>A(null)})}})},H=l=>{l&&(B(l),m(null),Z.post(route("phones.primary"),{phone_id:l,phoneable_type:e,phoneable_id:t},{preserveScroll:!0,onSuccess:()=>{b()},onError:C=>{const E=C&&(typeof C=="string"?C:Object.values(C)[0]);m(E||s("error_generic"))},onFinish:()=>B(null)}))},X=async l=>{try{await navigator.clipboard.writeText(l)}catch{}},R=l=>{l&&r({title:s("telefono_verificar"),text:s("telefono_verificar_confirm"),icon:"warning",onConfirm:()=>{I(l),m(null),Z.post(route("phones.verify"),{phone_id:l},{preserveScroll:!0,onSuccess:()=>{b()},onError:C=>{const E=C&&(typeof C=="string"?C:Object.values(C)[0]);m(E||s("error_generic"))},onFinish:()=>I(null)})}})};return a.jsxs("div",{className:"position-relative mt-5",children:[a.jsx("hr",{}),a.jsxs("div",{className:"d-flex justify-content-between align-items-center mt-4 mb-3",children:[a.jsx("h5",{className:"mb-0",children:s("telefonos")}),a.jsxs(ve,{variant:"primary",size:"sm",onClick:F,children:[a.jsx("i",{className:"la la-plus me-1"}),s("telefono")]})]}),i&&a.jsxs("div",{className:"text-center py-4",children:[a.jsx(oe,{animation:"border",size:"sm",className:"me-2"}),s("cargando")]}),!i&&f&&a.jsx("div",{className:"alert alert-danger mx-0 mb-3",children:s("error_generico")}),!i&&!f&&T.length===0&&a.jsx("div",{className:"text-muted",children:s("telefonos_sin")}),a.jsx(Se,{xs:1,md:2,lg:3,className:"g-3",children:T.map(l=>a.jsx(q,{children:a.jsxs(Ee,{className:`h-100 ${l.is_primary?"border-primary":""}`,children:[a.jsxs(Ee.Body,{children:[a.jsxs("div",{className:"d-flex justify-content-between align-items-start",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"fw-semibold",children:[Oa(l.e164),l.is_primary&&a.jsx("span",{className:"badge bg-primary ms-2",children:s("primario")}),l.is_whatsapp&&a.jsx("i",{className:"la la-whatsapp ms-2","aria-label":"WhatsApp"})]}),l.ext&&a.jsxs("div",{className:"text-muted small",children:[s("extension"),": ",l.ext]})]}),a.jsx("span",{className:`badge ${l.is_verified?"bg-success":"bg-secondary"}`,children:l.is_verified?s("verificado"):s("verificado_no")})]}),(l.label||l.type||l.notes)&&a.jsx("div",{className:"mt-2",children:a.jsxs("div",{className:"text-muted small",children:[l.label?a.jsxs(a.Fragment,{children:[a.jsxs("strong",{children:[s("etiqueta"),":"]})," ",l.label,a.jsx("br",{})]}):null,l.type?a.jsxs(a.Fragment,{children:[a.jsxs("strong",{children:[s("tipo"),":"]})," ",s(`${l.type}`),a.jsx("br",{})]}):null,l.notes?a.jsxs(a.Fragment,{children:[a.jsxs("strong",{children:[s("notas"),":"]})," ",l.notes]}):null]})})]}),a.jsxs(Ee.Footer,{className:"d-flex justify-content-between",children:[a.jsxs("div",{className:"btn-group",role:"group",children:[a.jsx(J,{placement:"top",overlay:a.jsx(Q,{children:s("llamar")}),children:a.jsx("a",{className:"btn btn-sm btn-outline-secondary",href:Ba(l.e164,l.ext),children:a.jsx("i",{className:"la la-phone"})})}),!l.is_verified&&a.jsx(J,{placement:"top",overlay:a.jsx(Q,{children:s("verificar")}),children:a.jsx("button",{className:"btn btn-sm btn-outline-secondary",onClick:()=>R(l.id),disabled:D===l.id,children:D===l.id?a.jsx(oe,{size:"sm",animation:"border"}):a.jsx("i",{className:"la la-check-circle"})})}),l.is_whatsapp&&a.jsx(J,{placement:"top",overlay:a.jsx(Q,{children:"WhatsApp"}),children:a.jsx("a",{className:"btn btn-sm btn-outline-success",href:Ia(l.e164,j),target:"_blank",rel:"noopener noreferrer",children:a.jsx("i",{className:"la la-whatsapp"})})}),a.jsx(J,{placement:"top",overlay:a.jsx(Q,{children:s("copiar")}),children:a.jsx("button",{className:"btn btn-sm btn-outline-secondary",onClick:()=>X(l.e164),children:a.jsx("i",{className:"la la-copy"})})}),!l.is_primary&&a.jsx(J,{placement:"top",overlay:a.jsx(Q,{children:s("primario_marcar")}),children:a.jsx("button",{className:"btn btn-sm btn-outline-primary",onClick:()=>H(l.id),disabled:O===l.id,children:O===l.id?a.jsx(oe,{size:"sm",animation:"border"}):a.jsx("i",{className:"la la-star"})})})]}),a.jsxs("div",{className:"btn-group",role:"group",children:[a.jsx(J,{placement:"top",overlay:a.jsx(Q,{children:s("editar")}),children:a.jsx("button",{className:"btn btn-sm btn-info text-white",onClick:()=>G(l),children:a.jsx("i",{className:"la la-edit"})})}),a.jsx(J,{placement:"top",overlay:a.jsx(Q,{children:s("eliminar")}),children:a.jsx("button",{className:"btn btn-sm btn-danger",onClick:()=>le(l.id),disabled:$===l.id,children:$===l.id?a.jsx(oe,{size:"sm",animation:"border"}):a.jsx("i",{className:"la la-trash"})})})]})]})]})},l.id))}),a.jsx(fe,{show:g,onHide:W,backdrop:"static",children:a.jsxs(_,{onSubmit:P,children:[a.jsx(fe.Header,{closeButton:!0,children:a.jsx(fe.Title,{children:c!=null&&c.id?s("telefono_editar"):s("telefono_nuevo")})}),a.jsxs(fe.Body,{children:[f&&a.jsx("div",{className:"alert alert-danger",children:s("error_generico")}),a.jsxs(Se,{className:"g-2",children:[a.jsxs(q,{md:8,children:[a.jsxs(_.Label,{children:[s("numero"),"*"]}),a.jsx(_.Control,{type:"text",value:(c==null?void 0:c.number)??"",onChange:l=>L("number",l.target.value),placeholder:"+34600111222",maxLength:14,required:!0})]}),a.jsxs(q,{md:4,children:[a.jsx(_.Label,{children:s("extension")}),a.jsx(_.Control,{type:"text",value:(c==null?void 0:c.ext)??"",onChange:l=>L("ext",l.target.value),placeholder:"123",maxLength:8})]}),a.jsxs(q,{md:6,children:[a.jsx(_.Label,{children:s("tipo")}),a.jsxs(_.Select,{value:(c==null?void 0:c.type)??"",onChange:l=>L("type",l.target.value),children:[a.jsx("option",{value:"",children:s("opcion_selec")}),a.jsx("option",{value:"mobile",children:s("movil")}),a.jsx("option",{value:"landline",children:s("fijo")}),a.jsx("option",{value:"other",children:s("otro")})]})]}),a.jsxs(q,{md:6,children:[a.jsx(_.Label,{children:s("etiqueta")}),a.jsx(_.Control,{type:"text",value:(c==null?void 0:c.label)??"",onChange:l=>L("label",l.target.value),placeholder:s("etiqueta_ej"),maxLength:50})]}),a.jsxs(q,{xs:12,children:[a.jsx(_.Label,{children:s("notas")}),a.jsx(_.Control,{as:"textarea",rows:2,value:(c==null?void 0:c.notes)??"",onChange:l=>L("notes",l.target.value)})]}),a.jsx(q,{md:4,className:"pt-2",children:a.jsx(_.Check,{type:"switch",id:"chk-whatsapp",label:"WhatsApp",checked:!!(c!=null&&c.is_whatsapp),onChange:l=>L("is_whatsapp",l.target.checked)})}),a.jsx(q,{md:4,className:"pt-2",children:a.jsx(_.Check,{type:"switch",id:"chk-primary",label:s("primario"),checked:!!(c!=null&&c.is_primary),onChange:l=>L("is_primary",l.target.checked)})})]})]}),a.jsxs(fe.Footer,{children:[a.jsx(ve,{variant:"secondary",onClick:W,disabled:k,children:s("cancelar")}),a.jsx(ve,{variant:"primary",type:"submit",disabled:k,children:k?a.jsx(oe,{size:"sm",animation:"border"}):s("guardar")})]})]})})]})}function Pa({user:e,roles:t={},user_roles:n={},salutations:s=[]}){var A,O,B,D,I;const r=Qe(),i=((A=At())==null?void 0:A.props)||{},d=i.locale||!1;i.languages;const{showConfirm:p}=Je();i.permissions;const h=((B=(O=i.languages)==null?void 0:O[d])==null?void 0:B[6])||"dd/MM/yyyy",f=Object.entries(t).map(([j,b])=>({value:j,label:b})),m=((I=(D=n==null?void 0:n[0])==null?void 0:D.id)==null?void 0:I.toString())||"",{data:g,setData:u,processing:c,errors:w}=Dt({role:m||((e==null?void 0:e.isAdmin)==1?"":"Invitados"),name:e.name||"",surname:e.surname||"",salutation:e.salutation||"",email:e.email||"",nif:e.nif||"",birthday:e.birthday?new Date(e.birthday):null,signature:null}),k=j=>{const{name:b,type:T,checked:F,value:G,files:W}=j.target;T==="checkbox"?u(b,F):T==="file"?u(b,W.length?W[0]:null):u(b,G)};function M(j){j.preventDefault();const b=new FormData;b.append("_method","PUT"),Object.entries(g).forEach(([T,F])=>{T==="signature"&&F instanceof File?b.append(T,F):typeof F=="object"&&F!==null?b.append(T,JSON.stringify(F)):F!=null&&b.append(T,F)}),Z.post(route("users.update",e.id),b,{forceFormData:!0,preserveScroll:!0,onSuccess:()=>console.log("Usuario actualizado"),onError:T=>console.error("Errores:",T),onFinish:()=>console.log("Petición finalizada")})}const $=()=>{p({title:r("firma_eliminar"),text:r("firma_eliminar_confirm"),icon:"warning",onConfirm:()=>{Z.delete(route("users.signature.delete",e.id),{preserveScroll:!0,onSuccess:()=>{location.reload()}})}})};return a.jsxs("div",{className:"col-12 gy-2",children:[a.jsxs("form",{onSubmit:M,children:[a.jsxs("div",{className:"row gy-3 mb-3",children:[(e==null?void 0:e.isAdmin)==1?a.jsx("div",{className:"col-12",children:a.jsxs("div",{className:"position-relative",children:[a.jsxs("label",{htmlFor:"role",className:"form-label",children:[r("role"),"*"]}),a.jsx(Zt,{name:"role",value:g.role,onChange:j=>u("role",j.target.value),options:f,required:!0}),a.jsx(Y,{message:w.role})]})}):a.jsx("input",{type:"hidden",name:"role",value:g.role}),a.jsx("div",{className:"col-md-2",children:a.jsxs("div",{children:[a.jsx("label",{htmlFor:"salutation",className:"form-label",children:r("tratamiento")}),a.jsxs(Pt,{className:"form-select",name:"salutation",value:g.salutation,onChange:j=>u("salutation",j.target.value),children:[a.jsx("option",{value:"",children:r("opcion_selec")}),s.map(j=>a.jsx("option",{value:j.value,children:j.label},j.value))]}),a.jsx(Y,{message:w.salutation})]})}),a.jsx("div",{className:"col-md-5",children:a.jsxs("div",{children:[a.jsxs("label",{htmlFor:"name",className:"form-label",children:[r("nombre"),"*"]}),a.jsx(je,{className:"",name:"name",type:"text",placeholder:r("nombre"),value:g.name,onChange:j=>u("name",j.target.value),maxLength:100,required:!0}),a.jsx(Y,{message:w.name})]})}),a.jsx("div",{className:"col-md-5",children:a.jsxs("div",{children:[a.jsxs("label",{htmlFor:"surname",className:"form-label",children:[r("apellidos"),"*"]}),a.jsx(je,{className:"",name:"surname",type:"text",placeholder:r("apellidos"),value:g.surname,onChange:j=>u("surname",j.target.value),maxLength:100,required:!0}),a.jsx(Y,{message:w.surname})]})}),a.jsx("div",{className:"col-md-6",children:a.jsxs("div",{children:[a.jsxs("label",{htmlFor:"email",className:"form-label",children:[r("email"),"*"]}),a.jsx(je,{className:"",name:"email",type:"email",placeholder:r("email"),value:g.email,onChange:j=>u("email",j.target.value),maxLength:100,required:!0}),a.jsx(Y,{message:w.email})]})}),a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{children:[a.jsx("label",{htmlFor:"nif",className:"form-label",children:r("nif")}),a.jsx(je,{className:"",name:"nif",type:"text",placeholder:r("nif"),value:g.nif,onChange:j=>u("nif",j.target.value),maxLength:15}),a.jsx(Y,{message:w.nif})]})}),a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"position-relative",children:[a.jsx("label",{htmlFor:"birthday",className:"form-label",children:r("fecha_nacimiento")}),a.jsx(Wt,{id:"birthday",name:"birthday",selected:g.birthday?new Date(g.birthday):null,onChange:(j,b)=>{u(j,b),b||u("published_end",null)},dateFormat:h}),a.jsx(Y,{message:w.birthday})]})}),a.jsx("div",{className:"w-100 m-0"}),(e==null?void 0:e.isAdmin)==1&&a.jsx("div",{className:"col-md-6",children:a.jsxs("div",{children:[a.jsx("label",{htmlFor:"signature",className:"form-label",children:r("firma")}),e.signature?a.jsxs("div",{className:"d-flex align-items-start",children:[a.jsx("img",{src:`/storage/signatures/${e.signature}`,alt:e.name,className:"img-thumbnail me-3",style:{maxWidth:"300px",objectFit:"contain"}}),a.jsx("button",{type:"button",className:"ms-2 btn btn-sm btn-danger",onClick:$,children:a.jsx("i",{className:"la la-trash"})})]}):a.jsx(Ht,{name:"signature",accept:"image/*",onChange:k,error:w.signature}),a.jsxs("p",{className:"pt-1 text-warning small",children:[a.jsx("span",{className:"me-5",children:r("imagen_formato")}),a.jsxs("span",{className:"me-5",children:[r("imagen_peso_max"),": 1MB"]}),r("imagen_medidas_recomendadas"),": 400x400px"]})]})})]}),a.jsx("div",{className:"mt-4 text-end",children:a.jsx(Qt,{disabled:c,className:"btn btn-rdn",children:c?r("procesando")+"...":r("guardar")})})]}),a.jsx(Aa,{phoneableType:"User",phoneableId:e.id,defaultWaMessage:r("whatsapp_mensaje")})]})}export{Pa as default};
