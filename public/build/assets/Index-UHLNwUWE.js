import{j as e,S as k,x as f,A as R}from"./app-D2BBDCFC.js";import{A as S}from"./AdminAuthenticatedLayout-BpRIVWHk.js";import{u as T,C as A,R as $,S as D,F,P as q}from"./useTableManagement-CimlMvBQ.js";import{S as w}from"./StatusButton-CNGm9NUM.js";import{T as E,a as O}from"./TableExporter-D3yV3r2t.js";import"./useSweetAlert-D27GvFwx.js";import{u as B}from"./useTranslation-CVJluGRe.js";import{r as I}from"./renderCellContent-DnZ9KIBd.js";import{O as m,T as p}from"./OverlayTrigger-D8mD9LjI.js";import"./Header-BKPdAUPJ.js";import"./Sidebar-CyvRIWTq.js";import"./bootstrap.bundle.min-Ba_qfNiZ.js";import"./NavLink-DsoYfajC.js";import"./Dropdown-DDVnA8hG.js";import"./transition-DtKZpb_s.js";import"./TextInput-WxNO9k3W.js";import"./es-CMu9_e4K.js";import"./floating-ui.dom-CQJTMakY.js";import"./SelectInput-xW4hb1gP.js";import"./FileSaver.min-Cyq3_crI.js";import"./typeof-QjJsDpFa.js";function de({auth:b,session:K,title:u,subtitle:v,provinces:l,country:r,queryParams:x={},availableLocales:L}){const n=typeof x=="object"&&x!==null?x:{},s=B(),i=[{key:"name",label:s("provincia"),sort:!0,filter:"text",class_th:"",class_td:"",placeholder:s("provincia_filtrar")}],{permissions:a,sortParams:h,perPage:j,setPerPage:g,visibleColumns:d,toggleColumnVisibility:_,SearchFieldChanged:N,sortChanged:y,filteredData:P,handleDelete:C}=T({table:"tblProvinces",allColumnKeys:i.map(t=>t.key),entityName:"provinces",indexRoute:"provinces.index",destroyRoute:"provinces.destroy",filteredDataRoute:"provinces.filtered-data",labelName:"provincia",queryParams:n,routeParams:[r.id]}),c=[];return a!=null&&a["countries.index"]&&c.push({text:s("paises_volver"),icon:"la-angle-left",url:"countries.index",modal:!1}),a!=null&&a["countries.edit"]&&c.push({text:s("volver_a")+` ${r.name}`,icon:"la-angle-left",url:"countries.edit",params:[r.id],modal:!1}),a!=null&&a["provinces.create"]&&c.push({text:s("provincia_nueva"),icon:"la-plus",url:"provinces.create",params:[r.id],modal:!1}),e.jsxs(S,{user:b.user,title:u,subtitle:v,actions:c,children:[e.jsx(k,{title:u}),e.jsxs("div",{className:"contents",children:[e.jsx("div",{className:"row",children:e.jsxs("div",{className:"controls d-flex align-items-center",children:[e.jsx(A,{columns:i,visibleColumns:d,toggleColumn:_}),e.jsx($,{perPage:j,setPerPage:g}),e.jsx(E,{filename:s("provincia"),columns:i,fetchData:P})]})}),e.jsx("div",{className:"table-responsive",children:e.jsxs(O,{className:"table table-nowrap table-striped align-middle mb-0",id:"tblProvinces",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[i.map(t=>e.jsxs("th",{className:`${t.class_th??""} ${d.includes(t.key)?"":"d-none"}`.trim(),children:[s(t.label),t.sort&&e.jsx(D,{name:t.key,sortable:!0,sort_field:n.sort_field,sort_direction:n.sort_direction,sortChanged:y})]},t.key)),e.jsx("th",{className:"text-center",children:s("acciones")})]})}),e.jsx(F,{columns:i,queryParams:n,visibleColumns:d,SearchFieldChanged:N}),e.jsx("tbody",{children:l.data.map(t=>e.jsxs("tr",{children:[i.map(o=>e.jsx("td",{className:`${o.class_td??""} ${d.includes(o.key)?"":"d-none"}`.trim(),children:I(t[o.key],o,t)},o.key)),e.jsxs("td",{className:"text-end",children:[(a==null?void 0:a["provinces.edit"])&&e.jsx(m,{placement:"top",overlay:e.jsx(p,{className:"ttp-top",children:t.status==1?s("provincia_activa"):s("provincia_inactiva")}),children:e.jsx(w,{status:t.status,id:t.id,updateRoute:"provinces.status",reloadUrl:route("provinces.index",r.id),reloadResource:"provinces"})},"status-"+t.id),(a==null?void 0:a["provinces.edit"])&&e.jsx(m,{placement:"top",overlay:e.jsx(p,{className:"ttp-top",children:s("poblaciones")}),children:e.jsx(f,{href:route("towns.index",t.id),className:"btn btn-sm btn-info ms-1",children:e.jsx("i",{className:"la la-city"})})},"provinces-"+t.id),(a==null?void 0:a["provinces.edit"])&&e.jsx(m,{placement:"top",overlay:e.jsx(p,{className:"ttp-top",children:s("editar")}),children:e.jsx(f,{href:route("provinces.edit",t.id),className:"btn btn-sm btn-info ms-1",children:e.jsx("i",{className:"la la-edit"})})},"edit-"+t.id),(a==null?void 0:a["provinces.destroy"])&&e.jsx(m,{placement:"top",overlay:e.jsx(p,{className:"ttp-top",children:s("eliminar")}),children:e.jsx("span",{children:e.jsx("button",{type:"button",className:"btn btn-sm btn-danger ms-1",onClick:()=>C(t.id),children:e.jsx("i",{className:"la la-trash"})})})},"delete-"+t.id)]})]},"province-"+t.id))})]})}),e.jsx(q,{links:l.meta.links,totalRecords:l.meta.total,currentPage:l.meta.current_page,perPage:l.meta.per_page,onPageChange:t=>{R.get(route("provinces.index",[r.id]),{...n,page:t,per_page:j,sort_field:h.sort_field,sort_direction:h.sort_direction},{preserveState:!0})}})]})]})}export{de as default};
