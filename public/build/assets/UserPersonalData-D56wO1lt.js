import{X as R,G as q,j as e,A as v}from"./app-ipN4Lpei.js";import{F as L}from"./DatePickerToForm-fGC9PJko.js";import{F as T}from"./FileInput-Dl7qVaaD.js";import{I as c}from"./InputError-BRgDUzXy.js";import{P as A}from"./PrimaryButton-BZCXfhHb.js";import{R as B}from"./RadioButton-Q_l98yea.js";import{T as h}from"./TextInput-CkCvusrN.js";import{u as M}from"./useSweetAlert-CmWHaLPS.js";import{u as O}from"./useTranslation-C25qZZp5.js";import"./es-dSXlHLzL.js";import"./floating-ui.dom-CQJTMakY.js";/* empty css                         */function Y({user:n,roles:y={},user_roles:x={}}){var u,g,f,j,b;const a=O(),d=((u=R())==null?void 0:u.props)||{},F=d.locale||!1;d.languages;const{showConfirm:C}=M();d.permissions;const D=((f=(g=d.languages)==null?void 0:g[F])==null?void 0:f[6])||"dd/MM/yyyy",S=Object.entries(y).map(([s,l])=>({value:s,label:l})),w=((b=(j=x==null?void 0:x[0])==null?void 0:j.id)==null?void 0:b.toString())||"",{data:m,setData:r,processing:p,errors:o}=q({role:w,name:n.name||"",surname:n.surname||"",email:n.email||"",nif:n.nif||"",birthday:n.birthday?new Date(n.birthday):null,signature:null}),_=s=>{const{name:l,type:t,checked:i,value:I,files:N}=s.target;t==="checkbox"?r(l,i):t==="file"?r(l,N.length?N[0]:null):r(l,I)};function P(s){s.preventDefault();const l=new FormData;l.append("_method","PUT"),Object.entries(m).forEach(([t,i])=>{t==="signature"&&i instanceof File?l.append(t,i):typeof i=="object"&&i!==null?l.append(t,JSON.stringify(i)):i!=null&&l.append(t,i)}),v.post(route("users.update",n.id),l,{forceFormData:!0,preserveScroll:!0,onSuccess:()=>console.log("Usuario actualizado"),onError:t=>console.error("Errores:",t),onFinish:()=>console.log("PeticiÃ³n finalizada")})}const E=()=>{C({title:a("firma_eliminar"),text:a("firma_eliminar_confirm"),icon:"warning",onConfirm:()=>{v.delete(route("users.signature.delete",n.id),{preserveScroll:!0,onSuccess:()=>{location.reload()}})}})};return e.jsx("div",{className:"col-12 gy-2",children:e.jsxs("form",{onSubmit:P,children:[e.jsxs("div",{className:"row gy-3 mb-3",children:[e.jsx("div",{className:"col-12",children:e.jsxs("div",{className:"position-relative",children:[e.jsxs("label",{htmlFor:"role",className:"form-label",children:[a("role"),"*"]}),e.jsx(B,{name:"role",value:m.role,onChange:s=>r("role",s.target.value),options:S,required:!0}),e.jsx(c,{message:o.role})]})}),e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"name",className:"form-label",children:[a("nombre"),"*"]}),e.jsx(h,{className:"",name:"name",type:"text",placeholder:a("nombre"),value:m.name,onChange:s=>r("name",s.target.value),maxLength:100,required:!0}),e.jsx(c,{message:o.name})]})}),e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"surname",className:"form-label",children:[a("apellidos"),"*"]}),e.jsx(h,{className:"",name:"surname",type:"text",placeholder:a("apellidos"),value:m.surname,onChange:s=>r("surname",s.target.value),maxLength:100,required:!0}),e.jsx(c,{message:o.surname})]})}),e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"email",className:"form-label",children:[a("email"),"*"]}),e.jsx(h,{className:"",name:"email",type:"email",placeholder:a("email"),value:m.email,onChange:s=>r("email",s.target.value),maxLength:100,required:!0}),e.jsx(c,{message:o.email})]})}),e.jsx("div",{className:"col-md-3",children:e.jsxs("div",{children:[e.jsx("label",{htmlFor:"nif",className:"form-label",children:a("nif")}),e.jsx(h,{className:"",name:"nif",type:"text",placeholder:a("nif"),value:m.nif,onChange:s=>r("nif",s.target.value),maxLength:15}),e.jsx(c,{message:o.nif})]})}),e.jsx("div",{className:"col-md-3",children:e.jsxs("div",{className:"position-relative",children:[e.jsx("label",{htmlFor:"birthday",className:"form-label",children:a("fecha_nacimiento")}),e.jsx(L,{id:"birthday",name:"birthday",selected:m.birthday?new Date(m.birthday):null,onChange:(s,l)=>{r(s,l),l||r("published_end",null)},dateFormat:D}),e.jsx(c,{message:o.birthday})]})}),e.jsx("div",{className:"w-100 m-0"}),e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{children:[e.jsx("label",{htmlFor:"signature",className:"form-label",children:a("firma")}),n.signature?e.jsxs("div",{className:"d-flex align-items-start",children:[e.jsx("img",{src:`/storage/signatures/${n.signature}`,alt:n.name,className:"img-thumbnail me-3",style:{maxWidth:"300px",objectFit:"contain"}}),e.jsx("button",{type:"button",className:"ms-2 btn btn-sm btn-danger",onClick:E,children:e.jsx("i",{className:"la la-trash"})})]}):e.jsx(T,{name:"signature",accept:"image/*",onChange:_,error:o.signature}),e.jsxs("p",{className:"pt-1 text-warning small",children:[e.jsx("span",{className:"me-5",children:a("imagen_formato")}),e.jsxs("span",{className:"me-5",children:[a("imagen_peso_max"),": 1MB"]}),a("imagen_medidas_recomendadas"),": 400x400px"]})]})})]}),e.jsx("div",{className:"mt-4 text-end",children:e.jsx(A,{disabled:p,className:"btn btn-rdn",children:p?a("procesando")+"...":a("guardar")})})]})})}export{Y as default};
