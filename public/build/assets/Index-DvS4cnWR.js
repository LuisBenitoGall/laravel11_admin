import{j as e,S as C,x as P,A as R}from"./app-D2BBDCFC.js";import{A as S}from"./AdminAuthenticatedLayout-BpRIVWHk.js";import{u as T,C as A,R as D,S as F,F as $,P as O}from"./useTableManagement-CimlMvBQ.js";import{S as U}from"./StatusButton-CNGm9NUM.js";import{T as q,a as E}from"./TableExporter-D3yV3r2t.js";import"./useSweetAlert-D27GvFwx.js";import{u as w}from"./useTranslation-CVJluGRe.js";import{r as B}from"./renderCellContent-DnZ9KIBd.js";import{O as m,T as c}from"./OverlayTrigger-D8mD9LjI.js";import"./Header-BKPdAUPJ.js";import"./Sidebar-CyvRIWTq.js";import"./bootstrap.bundle.min-Ba_qfNiZ.js";import"./NavLink-DsoYfajC.js";import"./Dropdown-DDVnA8hG.js";import"./transition-DtKZpb_s.js";import"./TextInput-WxNO9k3W.js";import"./es-CMu9_e4K.js";import"./floating-ui.dom-CQJTMakY.js";import"./SelectInput-xW4hb1gP.js";import"./FileSaver.min-Cyq3_crI.js";import"./typeof-QjJsDpFa.js";function de({auth:j,session:I,title:u,subtitle:b,units:i,levels:f,queryParams:d=null,availableLocales:K}){const n=typeof d=="object"&&d!==null?d:{},a=w();Object.entries(f||{}).map(([t,r])=>({value:t,label:r}));const l=[{key:"name",label:a("unidad"),sort:!0,filter:"text",type:"link",link:"units.edit",class_th:"",class_td:"",placeholder:a("unidad_filtrar")},{key:"symbol",label:a("simbolo"),sort:!0,filter:"text",class_th:"",class_td:"",placeholder:a("simbolo_filtrar")}],{permissions:s,sortParams:p,perPage:x,setPerPage:g,visibleColumns:o,toggleColumnVisibility:y,SearchFieldChanged:_,sortChanged:N,filteredData:v,handleDelete:k}=T({table:"tblUnits",allColumnKeys:l.map(t=>t.key),entityName:"units",indexRoute:"units.index",destroyRoute:"units.destroy",filteredDataRoute:"units.filtered-data",labelName:"unidad",queryParams:n}),h=[];return s!=null&&s["units.create"]&&h.push({text:a("unidad_nueva"),icon:"la-plus",url:"units.create",modal:!1}),e.jsxs(S,{user:j.user,title:u,subtitle:b,actions:h,children:[e.jsx(C,{title:u}),e.jsxs("div",{className:"contents",children:[e.jsx("div",{className:"row",children:e.jsxs("div",{className:"controls d-flex align-items-center ms-auto",children:[e.jsx(A,{columns:l,visibleColumns:o,toggleColumn:y}),e.jsx(D,{perPage:x,setPerPage:g}),e.jsx(q,{filename:a("unidades"),columns:l,fetchData:v})]})}),e.jsx("div",{className:"table-responsive",children:e.jsxs(E,{className:"table table-nowrap table-striped align-middle mb-0",id:"tblUnits",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[l.map(t=>e.jsxs("th",{className:`${t.class_th??""} ${o.includes(t.key)?"":"d-none"}`.trim(),children:[a(t.label),t.sort&&e.jsx(F,{name:t.key,sortable:!0,sort_field:n.sort_field,sort_direction:n.sort_direction,sortChanged:N})]},t.key)),e.jsx("th",{className:"text-center",children:a("acciones")})]})}),e.jsx($,{columns:l,queryParams:n,visibleColumns:o,SearchFieldChanged:_}),e.jsx("tbody",{children:i.data.map(t=>e.jsxs("tr",{children:[l.map(r=>e.jsx("td",{className:`${r.class_td??""} ${o.includes(r.key)?"":"d-none"}`.trim(),children:B(t[r.key],r,t)},r.key)),e.jsxs("td",{className:"text-end",children:[(s==null?void 0:s["units.edit"])&&e.jsx(m,{placement:"top",overlay:e.jsx(c,{className:"ttp-top",children:t.status==1?a("unidad_activa"):a("unidad_inactiva")}),children:e.jsx(U,{status:t.status,id:t.id,updateRoute:"units.status",reloadUrl:route("units.index"),reloadResource:"units"})},"status-"+t.id),(s==null?void 0:s["units.edit"])&&e.jsx(m,{placement:"top",overlay:e.jsx(c,{className:"ttp-top",children:a("editar")}),children:e.jsx(P,{href:route("units.edit",t.id),className:"btn btn-sm btn-info ms-1",children:e.jsx("i",{className:"la la-edit"})})},"edit-"+t.id),(s==null?void 0:s["units.destroy"])&&e.jsx(m,{placement:"top",overlay:e.jsx(c,{className:"ttp-top",children:a("eliminar")}),children:e.jsx("span",{children:e.jsx("button",{type:"button",className:"btn btn-sm btn-danger ms-1",onClick:()=>k(t.id),children:e.jsx("i",{className:"la la-trash"})})})},"delete-"+t.id)]})]},"unit-"+t.id))})]})}),e.jsx(O,{links:i.meta.links,totalRecords:i.meta.total,currentPage:i.meta.current_page,perPage:i.meta.per_page,onPageChange:t=>{R.get(route("units.index"),{...n,page:t,per_page:x,sort_field:p.sort_field,sort_direction:p.sort_direction},{preserveState:!0})}})]})]})}export{de as default};
