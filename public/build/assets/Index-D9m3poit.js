import{j as e,S as N,x as C,A as P}from"./app-D2BBDCFC.js";import{A as R}from"./AdminAuthenticatedLayout-BpRIVWHk.js";import{u as S,C as T,R as A,S as D,F,P as $}from"./useTableManagement-CimlMvBQ.js";import{S as q}from"./StatusButton-CNGm9NUM.js";import{T as E,a as K}from"./TableExporter-D3yV3r2t.js";import"./useSweetAlert-D27GvFwx.js";import{u as L}from"./useTranslation-CVJluGRe.js";import{r as O}from"./renderCellContent-DnZ9KIBd.js";import{O as n,T as m}from"./OverlayTrigger-D8mD9LjI.js";import"./Header-BKPdAUPJ.js";import"./Sidebar-CyvRIWTq.js";import"./bootstrap.bundle.min-Ba_qfNiZ.js";import"./NavLink-DsoYfajC.js";import"./Dropdown-DDVnA8hG.js";import"./transition-DtKZpb_s.js";import"./TextInput-WxNO9k3W.js";import"./es-CMu9_e4K.js";import"./floating-ui.dom-CQJTMakY.js";import"./SelectInput-xW4hb1gP.js";import"./FileSaver.min-Cyq3_crI.js";import"./typeof-QjJsDpFa.js";function de({auth:f,session:w,title:p,subtitle:_,products:l,queryParams:c={},availableLocales:B}){const o=typeof c=="object"&&c!==null?c:{},t=L(),r=[{key:"name",label:t("producto"),sort:!0,filter:"text",type:"link",link:"products.edit",class_th:"",class_td:"",placeholder:t("producto_filtrar")},{key:"reference",label:t("referencia"),sort:!0,filter:"text",class_th:"",class_td:"",placeholder:t("referencia_filtrar")},{key:"description",label:t("descripcion"),sort:!0,filter:"text",class_th:"",class_td:"",placeholder:t("descripcion_filtrar")},{key:"price",label:t("precio"),sort:!0,filter:"text",class_th:"text-center",class_td:"text-end",placeholder:t("precio_filtrar")},{key:"created_at",label:t("fecha_alta"),sort:!0,filter:"date",class_th:"text-center",class_td:"text-end",placeholder:t("fecha_alta"),dateKeys:["date_from","date_to"]},{key:"status",label:t("estado"),sort:!0,filter:"select",options:[{value:"1",label:t("activo")},{value:"0",label:t("inactivo")}],class_th:"text-center",class_td:"text-center",placeholder:t("estado_filtrar"),booleanLike:!0},{key:"image",label:t("imagen"),sort:!1,filter:"",type:"image",icon:"box",class_th:"text-center",class_td:"text-center",placeholder:""}],{permissions:s,sortParams:u,perPage:x,setPerPage:b,visibleColumns:d,toggleColumnVisibility:j,SearchFieldChanged:y,sortChanged:g,filteredData:k,handleDelete:v}=S({table:"tblProducts",allColumnKeys:r.map(a=>a.key),entityName:"products",indexRoute:"products.index",destroyRoute:"products.destroy",filteredDataRoute:"products.filtered-data",labelName:"producto",queryParams:o}),h=[];return s!=null&&s["products.create"]&&h.push({text:t("producto_nuevo"),icon:"la-plus",url:"products.create",modal:!1}),e.jsxs(R,{user:f.user,title:p,subtitle:_,actions:h,children:[e.jsx(N,{title:p}),e.jsxs("div",{className:"contents",children:[e.jsx("div",{className:"row",children:e.jsxs("div",{className:"controls d-flex align-items-center",children:[e.jsx(T,{columns:r,visibleColumns:d,toggleColumn:j}),e.jsx(A,{perPage:x,setPerPage:b}),e.jsx(E,{filename:t("productos"),columns:r,fetchData:k})]})}),e.jsx("div",{className:"table-responsive",children:e.jsxs(K,{className:"table table-nowrap table-striped align-middle mb-0",id:"tblProducts",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[r.map(a=>e.jsxs("th",{className:`${a.class_th??""} ${d.includes(a.key)?"":"d-none"}`.trim(),children:[t(a.label),a.sort&&e.jsx(D,{name:a.key,sortable:!0,sort_field:o.sort_field,sort_direction:o.sort_direction,sortChanged:g})]},a.key)),e.jsx("th",{className:"text-center",children:t("acciones")})]})}),e.jsx(F,{columns:r,queryParams:o,visibleColumns:d,SearchFieldChanged:y}),e.jsx("tbody",{children:l.data.map(a=>e.jsxs("tr",{children:[r.map(i=>e.jsx("td",{className:`${i.class_td??""} ${d.includes(i.key)?"":"d-none"}`.trim(),children:O(a[i.key],i,a)},i.key)),e.jsxs("td",{className:"text-end",children:[(s==null?void 0:s["products.edit"])&&e.jsx(n,{placement:"top",overlay:e.jsx(m,{className:"ttp-top",children:a.status==1?t("producto_activo"):t("producto_inactivo")}),children:e.jsx(q,{status:a.status,id:a.id,updateRoute:"products.status",reloadUrl:route("products.index"),reloadResource:"products"})},"status-"+a.id),(s==null?void 0:s["products.edit"])&&e.jsx(n,{placement:"top",overlay:e.jsx(m,{className:"ttp-top",children:t("editar")}),children:e.jsx(C,{href:route("products.edit",a.id),className:"btn btn-sm btn-info ms-1",children:e.jsx("i",{className:"la la-edit"})})},"edit-"+a.id),(s==null?void 0:s["products.destroy"])&&e.jsx(n,{placement:"top",overlay:e.jsx(m,{className:"ttp-top",children:t("eliminar")}),children:e.jsx("span",{children:e.jsx("button",{type:"button",className:"btn btn-sm btn-danger ms-1",onClick:()=>v(a.id),children:e.jsx("i",{className:"la la-trash"})})})},"delete-"+a.id)]})]},"product-"+a.id))})]})}),e.jsx($,{links:l.meta.links,totalRecords:l.meta.total,currentPage:l.meta.current_page,perPage:l.meta.per_page,onPageChange:a=>{P.get(route("products.index"),{...o,page:a,per_page:x,sort_field:u.sort_field,sort_direction:u.sort_direction},{preserveState:!0})}})]})]})}export{de as default};
