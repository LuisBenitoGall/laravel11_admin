import{X as y,r as m,j as s,S as k,a as x}from"./app-Vy3k0dXk.js";import{A as C}from"./AdminAuthenticatedLayout-RXgeCdrB.js";import{u as _}from"./useSweetAlert-McVN4vy-.js";import{u as S}from"./useTranslation-bNzddkut.js";import{O as T,T as $}from"./OverlayTrigger-DvJH8nk_.js";import"./Header-CzP3bCHI.js";import"./TextInput-B6FzyUMY.js";import"./Sidebar-CCn1nLaa.js";import"./bootstrap.bundle.min-B2fMu5hW.js";import"./NavLink-1EYN7PL6.js";import"./Dropdown-C05IHB0O.js";import"./transition-CGU5FYrv.js";function G({auth:p,session:A,title:o,subtitle:h,modules:b,company_modules:t,queryParams:E={},availableLocales:L}){var r;const e=S(),l=((r=y())==null?void 0:r.props)||{};l.locale,l.languages;const{showConfirm:j}=_();l.permissions;const[u,c]=m.useState(!1),[i,N]=m.useState(null),n=a=>{const g=t.includes(a.id),d=e(g?"desactivar":"activar");j({title:d,text:`${e("confirma_deseas")} ${d.toLowerCase()} ${a.label}`,icon:"warning",onConfirm:async()=>{try{await x.post(route("company-modules.toggle",a.id)),await x.get(route("companies.refresh-session")),window.location.reload()}catch(w){console.error("Error al cambiar el estado del módulo",w)}}})},f=a=>{console.log("Módulo seleccionado:",a),N(a),c(!0)},v=[];return s.jsxs(C,{user:p.user,title:o,subtitle:h,actions:v,children:[s.jsx(k,{title:o}),s.jsxs("div",{className:"contents pb-5",children:[s.jsx("div",{className:"row",children:s.jsx("div",{className:"col-12 pt-3",children:s.jsx("p",{children:e("modulos_selecciona_para_empresa")})})}),s.jsx("div",{className:"row g-3 mt-2",id:"company-modules",children:b.map(a=>s.jsx("div",{className:"col-12 col-sm-6 col-md-4 col-lg-2",children:s.jsx("div",{className:`card position-relative shadow-sm h-100 ${t.includes(a.id)?"active":""}`,style:{backgroundColor:a.color},children:s.jsxs("div",{className:"card-module card-body d-flex flex-column justify-content-between",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("i",{className:`main-icon la la-${a.icon} mb-2`}),s.jsx("h5",{className:"card-title text-capitalize",children:a.label})]}),s.jsxs("div",{className:"d-flex justify-content-between align-items-end mt-2",children:[s.jsx("button",{onClick:()=>f(a),className:"btn btn-sm btn-light p-1 border rounded-circle",title:e("informacion"),children:s.jsx("i",{className:"la la-info"})}),s.jsx(T,{placement:"top",overlay:s.jsx($,{className:"ttp-top",children:t.includes(a.id)?e("desactivar"):e("activar")}),children:t.includes(a.id)?s.jsx("button",{onClick:()=>n(a),className:"btn btn-sm btn-danger rounded-circle",title:"{__('desactivar')}",children:s.jsx("i",{className:"la la-ban"})}):s.jsx("button",{onClick:()=>n(a),className:"btn btn-sm btn-success rounded-circle",children:s.jsx("i",{className:"la la-check"})})},"status-"+a.id)]})]})})},a.id))})]}),u&&s.jsx("div",{className:"modal fade show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:s.jsx("div",{className:"modal-dialog",children:s.jsxs("div",{className:"modal-content",children:[s.jsxs("div",{className:"modal-header",children:[s.jsx("h5",{className:"modal-title",children:i==null?void 0:i.label}),s.jsx("button",{type:"button",className:"btn-close",onClick:()=>c(!1)})]}),s.jsx("div",{className:"modal-body text-center",children:s.jsx("p",{className:"mb-0",children:typeof(i==null?void 0:i.explanation)=="string"&&i.explanation.trim()||e("modulo_sin_info")})})]})})})]})}export{G as default};
