import{j as e,S as $,x as D,A as F}from"./app-DRj95fl3.js";import{A as q}from"./AdminAuthenticatedLayout-Bvk28IJ_.js";import{u as w,C as E,R as K,S as L,F as O,P as B}from"./useTableManagement-4XK40PxX.js";import{S as I}from"./StatusButton-CIImyXxq.js";import{T as M}from"./TableExporter-Cf6Xvvy9.js";import{u as U}from"./useTranslation-BmHTxgDU.js";import{r as V}from"./renderCellContent-C4U_4bOx.js";import{O as u,T as x}from"./OverlayTrigger-BXbmHDr2.js";import"./Header-sOAC_5kI.js";import"./useSweetAlert-D-bXTlQV.js";import"./Sidebar-Cs0Qbv6j.js";import"./bootstrap.bundle.min-CIHLONa7.js";import"./NavLink-B2TCDQIx.js";import"./Dropdown-CxSOcthg.js";import"./transition-MDSzoOOX.js";import"./TextInput-DHZ4LhQ-.js";import"./es-D0X2UUFm.js";import"./floating-ui.dom-CQJTMakY.js";import"./SelectInput-CcScNE44.js";import"./FileSaver.min-Bs0fFUdx.js";import"./typeof-QjJsDpFa.js";function he({auth:b,session:z,title:h,subtitle:g,environment:l,filters:G={},categories:i,queryParams:p={},availableLocales:H}){const d=typeof p=="object"&&p!==null?p:{},a=U(),o=[{key:"name",label:a("categoria"),sort:!0,filter:"text",type:"link",link:"categories.edit",routeParams:[l],placeholder:a("categorias_filtrar")},{key:"depth",label:a("nivel"),sort:!0,filter:"number",class_th:"text-center",class_td:"text-center",placeholder:a("nivel_filtrar")},{key:"position",label:a("posicion"),sort:!0,filter:"number",class_th:"text-center",class_td:"text-center",placeholder:a("posicion_filtrar")},{key:"created_at",label:a("fecha_alta"),sort:!0,filter:"date",class_th:"text-center",class_td:"text-end",placeholder:a("fecha_alta"),dateKeys:["date_from","date_to"]}],c=Array.isArray(i==null?void 0:i.data)?i.data:Array.isArray(i)?i:[],s=(i==null?void 0:i.meta)??null,y=(s==null?void 0:s.total)??c.length,N=(s==null?void 0:s.current_page)??1,P=(s==null?void 0:s.per_page)??c.length,k=(s==null?void 0:s.links)??[],{permissions:r,sortParams:f,perPage:j,setPerPage:C,visibleColumns:m,toggleColumnVisibility:R,SearchFieldChanged:v,sortChanged:A,filteredData:S,handleDelete:T}=w({table:"tblCategories",allColumnKeys:o.map(t=>t.key),entityName:"categories",indexRoute:"categories.index",destroyRoute:"categories.destroy",filteredDataRoute:"categories.filtered-data",routeParams:[l],labelName:"categoria",queryParams:d}),_=[];return r!=null&&r["companies.edit"]&&_.push({text:a("categoria_nueva"),icon:"la-plus",url:"categories.create",modal:!1,params:[l]}),e.jsxs(q,{user:b.user,title:h,subtitle:g,actions:_,children:[e.jsx($,{title:h}),e.jsxs("div",{className:"contents",children:[e.jsx("div",{className:"row",children:e.jsxs("div",{className:"controls d-flex align-items-center",children:[e.jsx(E,{columns:o,visibleColumns:m,toggleColumn:R}),e.jsx(K,{perPage:j,setPerPage:C}),e.jsx(M,{filename:a("categorias"),columns:o,fetchData:S})]})}),e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-nowrap table-striped align-middle mb-0",id:"tblCategories",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[o.map(t=>e.jsxs("th",{className:`${t.class_th??""} ${m.includes(t.key)?"":"d-none"}`.trim(),children:[a(t.label),t.sort&&e.jsx(L,{name:t.key,sortable:!0,sort_field:d.sort_field,sort_direction:d.sort_direction,sortChanged:A})]},t.key)),e.jsx("th",{className:"text-center",children:a("acciones")})]})}),e.jsx(O,{columns:o,queryParams:d,visibleColumns:m,SearchFieldChanged:v}),e.jsxs("tbody",{children:[c.map(t=>e.jsxs("tr",{children:[o.map(n=>e.jsx("td",{className:`${n.class_td??""} ${m.includes(n.key)?"":"d-none"}`.trim(),children:V(t[n.key],n,{...t,__routeParams:[l]})},n.key)),e.jsxs("td",{className:"text-end",children:[(r==null?void 0:r["categories.edit"])&&e.jsx(u,{placement:"top",overlay:e.jsx(x,{className:"ttp-top",children:t.status==1?a("categoria_activa"):a("categoria_inactiva")}),children:e.jsx("span",{children:e.jsx(I,{status:t.status,id:t.id,updateRoute:"categories.toggle",updateRouteParams:[l,t.id],reloadUrl:route("categories.index",l),reloadResource:"categories"})})},`status-${t.id}`),(r==null?void 0:r["categories.edit"])&&e.jsx(u,{placement:"top",overlay:e.jsx(x,{className:"ttp-top",children:a("editar")}),children:e.jsx(D,{href:route("categories.edit",[l,t.id]),className:"btn btn-sm btn-info ms-1",children:e.jsx("i",{className:"la la-edit"})})},`edit-${t.id}`),(r==null?void 0:r["categories.destroy"])&&e.jsx(u,{placement:"top",overlay:e.jsx(x,{className:"ttp-top",children:a("eliminar")}),children:e.jsx("span",{children:e.jsx("button",{type:"button",className:"btn btn-sm btn-danger ms-1",onClick:()=>T(t.id,[l]),children:e.jsx("i",{className:"la la-trash"})})})},`delete-${t.id}`)]})]},`category-${t.id}`)),c.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:o.length+1,className:"text-center py-5",children:a("sin_resultados")})})]})]})}),s&&e.jsx(B,{links:k,totalRecords:y,currentPage:N,perPage:P,onPageChange:t=>{F.get(route("categories.index",l),{...d,page:t,per_page:j,sort_field:f.sort_field,sort_direction:f.sort_direction},{preserveState:!0})}})]})]})}export{he as default};
