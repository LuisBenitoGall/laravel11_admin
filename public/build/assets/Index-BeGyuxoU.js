import{j as t,S as y,x as S,A as T}from"./app-DRj95fl3.js";import{A}from"./AdminAuthenticatedLayout-Bvk28IJ_.js";/* empty css                         */import{u as F,C as w,R as D,S as $,F as E,P as q}from"./useTableManagement-4XK40PxX.js";import{S as K}from"./StatusButton-CIImyXxq.js";import{T as O}from"./TableExporter-Cf6Xvvy9.js";import{u as W}from"./useTranslation-BmHTxgDU.js";import{r as B}from"./renderCellContent-C4U_4bOx.js";import{T as I}from"./Table-CUvKlSmp.js";import{O as u,T as x}from"./OverlayTrigger-BXbmHDr2.js";import"./Header-sOAC_5kI.js";import"./useSweetAlert-D-bXTlQV.js";import"./Sidebar-Cs0Qbv6j.js";import"./bootstrap.bundle.min-CIHLONa7.js";import"./NavLink-B2TCDQIx.js";import"./Dropdown-CxSOcthg.js";import"./transition-MDSzoOOX.js";import"./TextInput-DHZ4LhQ-.js";import"./es-D0X2UUFm.js";import"./floating-ui.dom-CQJTMakY.js";import"./SelectInput-CcScNE44.js";import"./FileSaver.min-Bs0fFUdx.js";import"./typeof-QjJsDpFa.js";function pe({auth:b,session:L,title:p,subtitle:f,company:l,side:M,returnRoutes:_,workplaces:o,queryParams:c={},availableLocales:U}){const n=typeof c=="object"&&c!==null?c:{},a=W(),g=(e,r)=>e!=null&&e.label?e.label:String(e==null?void 0:e.name).includes("customers.edit")?r("cliente_volver"):String(e==null?void 0:e.name).includes("providers.edit")?r("proveedor_volver"):r("volver"),i=[{key:"name",label:a("centro_trabajo"),sort:!0,filter:"text",type:"link",link:"workplaces.edit",class_th:"",class_td:"",placeholder:a("centro_trabajo_filtrar")},{key:"town",label:a("poblacion"),sort:!0,filter:"text",class_th:"",class_td:"",placeholder:a("poblacion_filtrar")},{key:"created_at",label:a("fecha_alta"),sort:!0,filter:"date",class_th:"text-center",class_td:"text-end",placeholder:a("fecha_alta"),dateKeys:["date_from","date_to"]}],{permissions:s,sortParams:h,perPage:j,setPerPage:v,visibleColumns:d,toggleColumnVisibility:k,SearchFieldChanged:N,sortChanged:C,filteredData:P,handleDelete:R}=F({table:"tblWorkplaces",allColumnKeys:i.map(e=>e.key),entityName:"workplaces",indexRoute:"workplaces.index",destroyRoute:"workplaces.destroy",filteredDataRoute:"workplaces.filtered-data",routeParams:[l==null?void 0:l.id],labelName:"centro_trabajo",queryParams:n}),m=[];return _.forEach(e=>{m.push({text:g(e,a),icon:"la-angle-left",url:e.name,params:e.params??(l==null?void 0:l.id)??null,modal:!1})}),s!=null&&s["workplaces.create"]&&m.push({text:a("centro_trabajo_nuevo"),icon:"la-plus",url:"workplaces.create",params:(l==null?void 0:l.id)??null,modal:!1}),t.jsxs(A,{user:b.user,title:p,subtitle:f,actions:m,children:[t.jsx(y,{title:p}),t.jsxs("div",{className:"contents",children:[t.jsxs("div",{className:"row",children:[t.jsx("div",{className:"col-12",children:t.jsxs("h2",{children:[a("centros_trabajo")," ",t.jsx("u",{children:l.name})]})}),t.jsxs("div",{className:"controls d-flex align-items-center",children:[t.jsx(w,{columns:i,visibleColumns:d,toggleColumn:k}),t.jsx(D,{perPage:j,setPerPage:v}),t.jsx(O,{filename:a("centros_trabajo"),columns:i,fetchData:P})]})]}),t.jsx("div",{className:"table-responsive",children:t.jsxs(I,{className:"table table-nowrap table-striped align-middle mb-0",id:"tblWorkplaces",children:[t.jsx("thead",{children:t.jsxs("tr",{children:[i.map(e=>t.jsxs("th",{className:`${e.class_th??""} ${d.includes(e.key)?"":"d-none"}`.trim(),children:[a(e.label),e.sort&&t.jsx($,{name:e.key,sortable:!0,sort_field:n.sort_field,sort_direction:n.sort_direction,sortChanged:C})]},e.key)),t.jsx("th",{className:"text-center",children:a("acciones")})]})}),t.jsx(E,{columns:i,queryParams:n,visibleColumns:d,SearchFieldChanged:N}),t.jsx("tbody",{children:o.data.map(e=>t.jsxs("tr",{children:[i.map(r=>t.jsx("td",{className:`${r.class_td??""} ${d.includes(r.key)?"":"d-none"}`.trim(),children:B(e[r.key],r,e)},r.key)),t.jsxs("td",{className:"text-end",children:[(s==null?void 0:s["workplaces.edit"])&&t.jsx(u,{placement:"top",overlay:t.jsx(x,{className:"ttp-top",children:e.status==1?a("centro_activo"):a("centro_inactivo")}),children:t.jsx(K,{status:e.status,id:e.id,updateRoute:"workplaces.status",reloadUrl:route("workplaces.index"),reloadResource:"workplaces"})},"status-"+e.id),(s==null?void 0:s["workplaces.edit"])&&t.jsx(u,{placement:"top",overlay:t.jsx(x,{className:"ttp-top",children:a("editar")}),children:t.jsx(S,{href:route("workplaces.edit",e.id),className:"btn btn-sm btn-info ms-1",children:t.jsx("i",{className:"la la-edit"})})},"edit-"+e.id),(s==null?void 0:s["workplaces.destroy"])&&t.jsx(u,{placement:"top",overlay:t.jsx(x,{className:"ttp-top",children:a("eliminar")}),children:t.jsx("span",{children:t.jsx("button",{type:"button",className:"btn btn-sm btn-danger ms-1",onClick:()=>R(e.id),children:t.jsx("i",{className:"la la-trash"})})})},"delete-"+e.id)]})]},"workplace-"+e.id))})]})}),t.jsx(q,{links:o.meta.links,totalRecords:o.meta.total,currentPage:o.meta.current_page,perPage:o.meta.per_page,onPageChange:e=>{T.get(route("workplaces.index"),{...n,page:e,per_page:j,sort_field:h.sort_field,sort_direction:h.sort_direction},{preserveState:!0})}})]})]})}export{pe as default};
