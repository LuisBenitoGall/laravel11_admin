import{j as e,S as v,x as C,A as P}from"./app-NnFxdXA2.js";import{A as R}from"./AdminAuthenticatedLayout-DegxA_vr.js";/* empty css                         */import{u as S,C as T,R as A,S as D,F,P as $}from"./useTableManagement-Ba3jHw9z.js";import{S as q}from"./StatusButton-CF0JIfNg.js";import{T as z,a as E}from"./TableExporter-B-AMcDr1.js";import{u as K}from"./useTranslation-D4BTlT_h.js";import{r as O}from"./renderCellContent-CfgmT6uf.js";import{O as m,T as u}from"./OverlayTrigger-Cq1xmpeu.js";import"./Header-CD84b1cW.js";import"./TextInput-CyElN-IW.js";import"./useSweetAlert-9_SeR-8m.js";import"./Sidebar-Drm6TH6A.js";import"./bootstrap.bundle.min-BWQMyn1D.js";import"./NavLink-lbotXNTD.js";import"./Dropdown-CmfadxWU.js";import"./transition-CHBtRj2X.js";import"./es-CcTx2m4K.js";import"./floating-ui.dom-CQJTMakY.js";import"./SelectInput-Dgf13zl3.js";import"./typeof-QjJsDpFa.js";function ne({auth:_,session:w,title:x,subtitle:f,companies:l,queryParams:c={},availableLocales:B}){const o=typeof c=="object"&&c!==null?c:{},t=K(),r=[{key:"name",label:t("razon_social"),sort:!0,filter:"text",type:"link",link:"companies.edit",class_th:"",class_td:"",placeholder:t("razon_social_filtrar")},{key:"tradename",label:t("nombre_comercial"),sort:!0,filter:"text",class_th:"",class_td:"",placeholder:t("nombre_comercial_filtrar")},{key:"created_at",label:t("fecha_alta"),sort:!0,filter:"date",class_th:"text-center",class_td:"text-end",placeholder:t("fecha_alta"),dateKeys:["date_from","date_to"]},{key:"nif",label:t("nif"),sort:!0,filter:"text",class_th:"",class_td:"",placeholder:t("nif_filtrar")},{key:"is_ute",label:t("ute"),sort:!0,filter:"select",options:[{value:"1",label:t("si")},{value:"0",label:t("no")}],class_th:"text-center",class_td:"text-center",placeholder:t("ute_filtrar")},{key:"logo",label:t("logo"),sort:!1,filter:"",type:"image",icon:"building",class_th:"text-center",class_td:"text-center",placeholder:""}],{permissions:a,sortParams:h,perPage:p,setPerPage:b,visibleColumns:n,toggleColumnVisibility:j,SearchFieldChanged:g,sortChanged:y,filteredData:k,handleDelete:N}=S({table:"tblCustomers",allColumnKeys:r.map(s=>s.key),entityName:"customers",indexRoute:"customers.index",destroyRoute:"customers.destroy",filteredDataRoute:"customers.filtered-data",labelName:"cliente",queryParams:o}),d=[];return a!=null&&a["customers.create"]&&d.push({text:t("cliente_nuevo"),icon:"la-plus",url:"customers.create",modal:!1}),a!=null&&a["customers.create"]&&d.push({text:t("clientes_importar"),icon:"la-file-import",url:"customers.import",modal:!1}),e.jsxs(R,{user:_.user,title:x,subtitle:f,actions:d,children:[e.jsx(v,{title:x}),e.jsxs("div",{className:"contents",children:[e.jsx("div",{className:"row",children:e.jsxs("div",{className:"controls d-flex align-items-center",children:[e.jsx(T,{columns:r,visibleColumns:n,toggleColumn:j}),e.jsx(A,{perPage:p,setPerPage:b}),e.jsx(z,{filename:t("empresas"),columns:r,fetchData:k})]})}),e.jsx("div",{className:"table-responsive",children:e.jsxs(E,{className:"table table-nowrap table-striped align-middle mb-0",id:"tblCustomers",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[r.map(s=>e.jsxs("th",{className:`${s.class_th??""} ${n.includes(s.key)?"":"d-none"}`.trim(),children:[t(s.label),s.sort&&e.jsx(D,{name:s.key,sortable:!0,sort_field:o.sort_field,sort_direction:o.sort_direction,sortChanged:y})]},s.key)),e.jsx("th",{className:"text-center",children:t("acciones")})]})}),e.jsx(F,{columns:r,queryParams:o,visibleColumns:n,SearchFieldChanged:g}),e.jsx("tbody",{children:l.data.map(s=>e.jsxs("tr",{children:[r.map(i=>e.jsx("td",{className:`${i.class_td??""} ${n.includes(i.key)?"":"d-none"}`.trim(),children:O(s[i.key],i,s)},i.key)),e.jsxs("td",{className:"text-end",children:[(a==null?void 0:a["customers.edit"])&&e.jsx(m,{placement:"top",overlay:e.jsx(u,{className:"ttp-top",children:s.status==1?t("cliente_activo"):t("cliente_inactivo")}),children:e.jsx(q,{status:s.status,id:s.id,updateRoute:"customers.status",reloadUrl:route("customers.index"),reloadResource:"customers"})},"status-"+s.id),(a==null?void 0:a["customers.edit"])&&e.jsx(m,{placement:"top",overlay:e.jsx(u,{className:"ttp-top",children:t("editar")}),children:e.jsx(C,{href:route("customers.edit",s.id),className:"btn btn-sm btn-info ms-1",children:e.jsx("i",{className:"la la-edit"})})},"edit-"+s.id),(a==null?void 0:a["customers.destroy"])&&e.jsx(m,{placement:"top",overlay:e.jsx(u,{className:"ttp-top",children:t("eliminar")}),children:e.jsx("span",{children:e.jsx("button",{type:"button",className:"btn btn-sm btn-danger ms-1",onClick:()=>N(s.relation_id),children:e.jsx("i",{className:"la la-trash"})})})},"delete-"+s.id)]})]},"company-"+s.id))})]})}),e.jsx($,{links:l.meta.links,totalRecords:l.meta.total,currentPage:l.meta.current_page,perPage:l.meta.per_page,onPageChange:s=>{P.get(route("customers.index"),{...o,page:s,per_page:p,sort_field:h.sort_field,sort_direction:h.sort_direction},{preserveState:!0})}})]})]})}export{ne as default};
