import{j as e,S as v,x as C,A as P}from"./app-Vy3k0dXk.js";import{A as R}from"./AdminAuthenticatedLayout-RXgeCdrB.js";import{u as S,C as T,R as A,S as D,F,P as $}from"./useTableManagement-BQ5yzFRQ.js";import{S as q}from"./StatusButton-CeSFsilb.js";import{T as z,a as E}from"./TableExporter-DYGiwVVL.js";import"./useSweetAlert-McVN4vy-.js";import{u as K}from"./useTranslation-bNzddkut.js";import{r as O}from"./renderCellContent-DrjGqCVQ.js";import{O as c,T as m}from"./OverlayTrigger-DvJH8nk_.js";import"./Header-CzP3bCHI.js";import"./TextInput-B6FzyUMY.js";import"./Sidebar-CCn1nLaa.js";import"./bootstrap.bundle.min-B2fMu5hW.js";import"./NavLink-1EYN7PL6.js";import"./Dropdown-C05IHB0O.js";import"./transition-CGU5FYrv.js";import"./es-290DBA3j.js";import"./floating-ui.dom-CQJTMakY.js";import"./SelectInput-C5X4bp1Q.js";import"./typeof-QjJsDpFa.js";function oe({auth:_,session:w,title:p,subtitle:f,companies:r,queryParams:d={},availableLocales:B}){const i=typeof d=="object"&&d!==null?d:{},a=K(),l=[{key:"name",label:a("razon_social"),sort:!0,filter:"text",type:"link",link:"companies.edit",class_th:"",class_td:"",placeholder:a("razon_social_filtrar")},{key:"tradename",label:a("nombre_comercial"),sort:!0,filter:"text",class_th:"",class_td:"",placeholder:a("nombre_comercial_filtrar")},{key:"created_at",label:a("fecha_alta"),sort:!0,filter:"date",class_th:"text-center",class_td:"text-end",placeholder:a("fecha_alta"),dateKeys:["date_from","date_to"]},{key:"nif",label:a("nif"),sort:!0,filter:"text",class_th:"",class_td:"",placeholder:a("nif_filtrar")},{key:"is_ute",label:a("ute"),sort:!0,filter:"select",options:[{value:"1",label:a("si")},{value:"0",label:a("no")}],class_th:"text-center",class_td:"text-center",placeholder:a("ute_filtrar")},{key:"logo",label:a("logo"),sort:!1,filter:"",type:"image",icon:"building",class_th:"text-center",class_td:"text-center",placeholder:""}],{permissions:s,sortParams:u,perPage:x,setPerPage:b,visibleColumns:n,toggleColumnVisibility:j,SearchFieldChanged:g,sortChanged:y,filteredData:k,handleDelete:N}=S({table:"tblCompanies",allColumnKeys:l.map(t=>t.key),entityName:"companies",indexRoute:"companies.index",destroyRoute:"companies.destroy",filteredDataRoute:"companies.filtered-data",labelName:"empresa",queryParams:i}),h=[];return s!=null&&s["companies.create"]&&h.push({text:a("empresa_nueva"),icon:"la-plus",url:"companies.create",modal:!1}),e.jsxs(R,{user:_.user,title:p,subtitle:f,actions:h,children:[e.jsx(v,{title:p}),e.jsxs("div",{className:"contents",children:[e.jsx("div",{className:"row",children:e.jsxs("div",{className:"controls d-flex align-items-center",children:[e.jsx(T,{columns:l,visibleColumns:n,toggleColumn:j}),e.jsx(A,{perPage:x,setPerPage:b}),e.jsx(z,{filename:a("empresas"),columns:l,fetchData:k})]})}),e.jsx("div",{className:"table-responsive",children:e.jsxs(E,{className:"table table-nowrap table-striped align-middle mb-0",id:"tblCompanies",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[l.map(t=>e.jsxs("th",{className:`${t.class_th??""} ${n.includes(t.key)?"":"d-none"}`.trim(),children:[a(t.label),t.sort&&e.jsx(D,{name:t.key,sortable:!0,sort_field:i.sort_field,sort_direction:i.sort_direction,sortChanged:y})]},t.key)),e.jsx("th",{className:"text-center",children:a("acciones")})]})}),e.jsx(F,{columns:l,queryParams:i,visibleColumns:n,SearchFieldChanged:g}),e.jsx("tbody",{children:r.data.map(t=>e.jsxs("tr",{children:[l.map(o=>e.jsx("td",{className:`${o.class_td??""} ${n.includes(o.key)?"":"d-none"}`.trim(),children:O(t[o.key],o,t)},o.key)),e.jsxs("td",{className:"text-end",children:[(s==null?void 0:s["companies.edit"])&&e.jsx(c,{placement:"top",overlay:e.jsx(m,{className:"ttp-top",children:t.status==1?a("empresa_activa"):a("empresa_inactiva")}),children:e.jsx(q,{status:t.status,id:t.id,updateRoute:"companies.status",reloadUrl:route("companies.index"),reloadResource:"companies"})},"status-"+t.id),(s==null?void 0:s["companies.edit"])&&e.jsx(c,{placement:"top",overlay:e.jsx(m,{className:"ttp-top",children:a("editar")}),children:e.jsx(C,{href:route("companies.edit",t.id),className:"btn btn-sm btn-info ms-1",children:e.jsx("i",{className:"la la-edit"})})},"edit-"+t.id),(s==null?void 0:s["companies.destroy"])&&e.jsx(c,{placement:"top",overlay:e.jsx(m,{className:"ttp-top",children:a("eliminar")}),children:e.jsx("span",{children:e.jsx("button",{type:"button",className:"btn btn-sm btn-danger ms-1",onClick:()=>N(t.id),children:e.jsx("i",{className:"la la-trash"})})})},"delete-"+t.id)]})]},"company-"+t.id))})]})}),e.jsx($,{links:r.meta.links,totalRecords:r.meta.total,currentPage:r.meta.current_page,perPage:r.meta.per_page,onPageChange:t=>{P.get(route("companies.index"),{...i,page:t,per_page:x,sort_field:u.sort_field,sort_direction:u.sort_direction},{preserveState:!0})}})]})]})}export{oe as default};
