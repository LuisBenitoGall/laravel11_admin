import{r as o,j as e,X as w,G as _,a as k}from"./app-ipN4Lpei.js";import{H as T,d as A}from"./Header-bG4uIAmT.js";import{S as E}from"./Sidebar-Dzqm1Vbq.js";import"./Dropdown-DaycTqil.js";import{u as S}from"./useTranslation-C25qZZp5.js";import"./TextInput-CkCvusrN.js";import{u as I}from"./useSweetAlert-CmWHaLPS.js";function y({type:l="success",message:n}){const[i,a]=o.useState(!0);return o.useEffect(()=>{const d=setTimeout(()=>{a(!1)},4e3);return()=>clearTimeout(d)},[]),!i||!n?null:e.jsxs("div",{className:`alert- alert alert-${l} alert-dismissible fade show`,role:"alert",children:[n,e.jsx("button",{type:"button",className:"btn-close","aria-label":"Close",onClick:()=>a(!1)})]})}const M=({show:l,onClose:n,title:i,children:a,onConfirm:d,confirmText:h,cancelText:r="Cancelar"})=>(S(),e.jsx(e.Fragment,{children:l&&e.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1",role:"dialog","aria-labelledby":"modalTitle","aria-hidden":"true",children:e.jsx("div",{className:"modal-dialog",role:"document",children:e.jsxs("div",{className:"modal-content",children:[e.jsx("div",{className:"modal-header",children:e.jsx("h5",{className:"modal-title",children:i})}),a]})})})}));function J({user:l,title:n,subtitle:i,actions:a,header:d,children:h}){var v;const r=S(),m=((v=w())==null?void 0:v.props)||{},s=m.sessionData||{},c=(s==null?void 0:s.currentCompany)||!1,[F,$]=o.useState(!1),[C,u]=o.useState(!c),[p,N]=o.useState(null);s!=null&&s.companySettings;const f=(s==null?void 0:s.companies)||[];s!=null&&s.companyModules;const{processing:x}=_({selectedCompany:null}),{showAlert:j}=I();o.useEffect(()=>{c||setTimeout(()=>u(!0),200)},[c]);const g=r("empresa_selec_aviso"),b=async t=>{if(t.preventDefault(),!p){j("Error",g,"error");return}try{await k.post(route("companies.select"),{selectedCompany:p}),u(!1),A.Inertia.reload({preserveState:!1,preserveScroll:!0})}catch{j("Error",r("empresa_selec_aviso"),"error")}};return e.jsxs("div",{id:"layout-wrapper",children:[e.jsx(T,{title:n,subtitle:i,user:l,actions:a,companies:f,current_company:c}),e.jsx(E,{}),e.jsx("div",{className:"main-content",children:e.jsx("div",{className:"page-content",children:e.jsxs("main",{children:[e.jsx(y,{type:"success",message:m.msg}),e.jsx(y,{type:"danger",message:m.alert}),h]})})}),e.jsx(M,{show:C,onClose:()=>u(!1),onConfirm:b,title:r("empresa_selec"),children:e.jsxs("form",{onSubmit:b,children:[e.jsx("input",{type:"hidden",name:"_token",value:document.querySelector('meta[name="csrf-token"]').getAttribute("content")}),e.jsx("div",{className:"modal-body",children:f.map(t=>e.jsxs("div",{className:"form-check",children:[e.jsx("input",{className:"form-check-input mt-1",type:"radio",name:"selectedCompany",id:`company-${t.id}`,value:t.id,checked:p===t.id,onChange:()=>N(t.id)}),e.jsx("label",{className:"form-check-label",htmlFor:`company-${t.id}`,children:t.name})]},t.id))}),e.jsx("div",{className:"modal-footer",children:e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:x,children:r(x?"enviando":"enviar")})})]})})]})}export{J as A};
