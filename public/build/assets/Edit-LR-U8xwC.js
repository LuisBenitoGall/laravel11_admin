import{X as I,G as A,j as e,S as D,A as b}from"./app-DRj95fl3.js";import{A as L}from"./AdminAuthenticatedLayout-Bvk28IJ_.js";import"./Header-sOAC_5kI.js";import"./react-tooltip.min-B6vStgXO.js";import{F as z}from"./FileInput-si-eiBrJ.js";import{I as P}from"./InfoPopover-DBtQ7ev6.js";import{I as x}from"./InputError-DR469WsC.js";import{P as T}from"./PrimaryButton-CT79ceK8.js";import{T as h}from"./TextInput-DHZ4LhQ-.js";import{u as W}from"./useSweetAlert-D-bXTlQV.js";import{u as k}from"./useTranslation-BmHTxgDU.js";import"./Sidebar-Cs0Qbv6j.js";import"./bootstrap.bundle.min-CIHLONa7.js";import"./NavLink-B2TCDQIx.js";import"./Dropdown-CxSOcthg.js";import"./transition-MDSzoOOX.js";import"./OverlayTrigger-BXbmHDr2.js";import"./floating-ui.dom-CQJTMakY.js";function te({auth:_,session:B,title:f,subtitle:N,availableLocales:O,company:t}){var g;const a=k(),p=((g=I())==null?void 0:g.props)||{};p.locale,p.languages;const{showConfirm:v}=W(),n=p.permissions||{},{data:c,setData:i,errors:m,processing:u}=A({name:t.name||"",tradename:t.tradename||"",nif:t.nif||"",logo:null}),F=r=>{const{name:s,type:o,checked:l,value:E,files:j}=r.target;o==="checkbox"?i(s,l):o==="file"?i(s,j.length?j[0]:null):i(s,E)};function S(r){r.preventDefault();const s=new FormData;s.append("_method","PUT"),Object.entries(c).forEach(([o,l])=>{o==="logo"&&l instanceof File?s.append(o,l):typeof l=="object"&&l!==null?s.append(o,JSON.stringify(l)):l!=null&&s.append(o,l)}),b.post(route("companies.update",t.id),s,{forceFormData:!0,preserveScroll:!0,onSuccess:()=>console.log("Empresa actualizada"),onError:o=>console.error("Errores:",o),onFinish:()=>console.log("PeticiÃ³n finalizada")})}const w=()=>{v({title:a("logo_eliminar"),text:a("logo_eliminar_confirm"),icon:"warning",onConfirm:()=>{b.delete(route("companies.logo.delete",t.id),{preserveScroll:!0,onSuccess:()=>{location.reload()}})}})},C=r=>{if(typeof r!="string")return"";const s=r.trim();return s?s.startsWith("http")||s.startsWith("//")||s.startsWith("/")?s:s.includes("storage/")?"/"+s.replace(/^\/+/,""):s.includes("companies/")?"/storage/"+s.replace(/^\/+/,""):`/storage/companies/${s.replace(/^\/+/,"")}`:""},d=[];return n!=null&&n["companies.index"]&&d.push({text:a("empresas_volver"),icon:"la-angle-left",url:"companies.index",modal:!1}),n!=null&&n["companies.create"]&&d.push({text:a("empresa_nueva"),icon:"la-plus",url:"companies.create",modal:!1}),n!=null&&n["workplaces.index"]&&d.push({text:a("centros_trabajo"),icon:"la-map-marker-alt",url:"workplaces.index",modal:!1}),e.jsxs(L,{user:_.user,title:f,subtitle:N,actions:d,children:[e.jsx(D,{title:f}),e.jsxs("div",{className:"contents pb-4",children:[e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-12",children:e.jsxs("h2",{children:[a("empresa")," ",e.jsx("u",{children:t.name}),t.is_ute?e.jsx("span",{className:"ms-2",children:"(UTE)"}):""]})}),e.jsxs("div",{className:"col-12 mt-2 mb-4",children:[e.jsxs("span",{className:"text-muted me-5",children:[a("creado"),": ",e.jsx("strong",{children:t.formatted_created_at})]}),t.created_by_name&&e.jsxs("span",{className:"text-muted me-5",children:[a("creado_por"),": ",e.jsx("strong",{children:t.created_by_name})]}),e.jsxs("span",{className:"text-muted me-5",children:[a("actualizado"),": ",e.jsx("strong",{children:t.formatted_updated_at})]}),t.updated_by_name&&e.jsxs("span",{className:"text-muted me-5",children:[a("actualizado_por"),": ",e.jsx("strong",{children:t.updated_by_name})]})]})]}),e.jsx("form",{onSubmit:S,children:e.jsxs("div",{className:"row gy-3",children:[e.jsx("div",{className:"col-lg-6",children:e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"name",className:"form-label",children:[a("razon_social"),"*"]}),e.jsx(h,{className:"",type:"text",placeholder:a("empresa_nombre"),value:c.name,onChange:r=>i("name",r.target.value),maxLength:100}),e.jsx(x,{message:m.name})]})}),e.jsx("div",{className:"col-lg-6",children:e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"tradename",className:"form-label",children:[a("nombre_comercial"),"*"]}),e.jsx(h,{className:"",type:"text",placeholder:a("nombre_comercial"),value:c.tradename,onChange:r=>i("tradename",r.target.value),maxLength:100}),e.jsx(x,{message:m.tradename})]})}),e.jsx("div",{className:"col-lg-3",children:e.jsxs("div",{className:"position-relative",children:[e.jsxs("label",{htmlFor:"nif",className:"form-label",children:[a("nif"),"*"]}),e.jsx(h,{className:"",type:"text",placeholder:a("nif"),value:c.nif,onChange:r=>i("nif",r.target.value),maxLength:15}),e.jsx(P,{code:"company-nif"}),e.jsx(x,{message:m.nif})]})}),e.jsx("div",{className:"offset-lg-1 col-lg-8",children:e.jsxs("div",{children:[e.jsx("label",{htmlFor:"logo",className:"form-label",children:a("logo")}),t.logo?e.jsxs("div",{className:"d-flex align-items-start",children:[e.jsx("img",{src:C(t.logo),alt:t.name,className:"img-thumbnail me-3",style:{maxWidth:"300px",objectFit:"contain"}}),e.jsx("button",{type:"button",className:"ms-2 btn btn-sm btn-danger",onClick:w,children:e.jsx("i",{className:"la la-trash"})})]}):e.jsx(z,{name:"logo",accept:"image/*",onChange:F,error:m.logo}),e.jsxs("p",{className:"pt-1 text-warning small",children:[e.jsx("span",{className:"me-5",children:a("imagen_formato")}),e.jsxs("span",{className:"me-5",children:[a("imagen_peso_max"),": 1MB"]}),a("imagen_medidas_recomendadas"),": 400x400px"]})]})}),e.jsx("div",{className:"mt-4 text-end",children:e.jsx(T,{disabled:u,className:"btn btn-rdn",children:u?a("procesando")+"...":a("guardar")})})]})})]})]})}export{te as default};
